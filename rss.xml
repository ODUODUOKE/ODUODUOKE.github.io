<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>哦哆哆克の博客</title>
  
  
  <link href="https://blog.wo0ow.com/rss.xml" rel="self"/>
  
  <link href="https://blog.wo0ow.com/"/>
  <updated>2025-01-19T01:49:10.388Z</updated>
  <id>https://blog.wo0ow.com/</id>
  
  <author>
    <name>MUMU</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Vmware中取消VmwareTools分辨率自适应</title>
    <link href="https://blog.wo0ow.com/mblog/11025.html"/>
    <id>https://blog.wo0ow.com/mblog/11025.html</id>
    <published>2025-01-17T16:29:24.000Z</published>
    <updated>2025-01-19T01:49:10.388Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/asd627992512/article/details/122735820">ESXI6.7 windows虚拟机 取消Vmware Tools分辨率自适应/固定分辨率</a></p><p>变更<code>VMwareResolutionSet.exe</code>文件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;ProgramDir&gt;\VMware\VMware Tools\VMwareResolutionSet.exe</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/asd627992512/article/details/122735820&quot;&gt;ESXI6.7 windows虚拟机 取消Vmware Tools分辨率自适应/固定分辨率&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;变更&lt;code&gt;V</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>Linux下通过宝塔搭建勾股OA办公系统</title>
    <link href="https://blog.wo0ow.com/mblog/28055.html"/>
    <id>https://blog.wo0ow.com/mblog/28055.html</id>
    <published>2025-01-16T02:45:33.000Z</published>
    <updated>2025-01-16T03:41:25.608Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.gougucms.com/home/book/detail/bid/3/id/8.html">勾股OA官方文档</a></p><p><a href="https://blog.csdn.net/mfkd1000/article/details/130597263">勾股oa安装运行环境windown Nginx</a></p><p><a href="https://gitee.com/gouguopen/office">gitee开源-勾股OA系统</a></p><hr><h2 id="宝塔Linux面板安装">宝塔Linux面板安装</h2><p><a href="https://www.bt.cn/bbs/forum.php?mod=forumdisplay&amp;fid=36&amp;filter=typeid&amp;typeid=6">下载linux宝塔-9.0.0 LTS</a></p><p><img src="/mblog/28055/Snipaste_2025-01-16_10-51-51.png" alt></p><p>安装命令</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">url=https://download.bt.cn/install/install_lts.sh;if [ -f /usr/bin/curl ];then curl -sSO $url;else wget -O install_lts.sh $url;fi;bash install_lts.sh ed8484bec</span><br></pre></td></tr></table></figure><p>安装完成</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">========================面板账户登录信息==========================</span><br><span class="line"></span><br><span class="line"> 【云服务器】请在安全组放行 21959 端口</span><br><span class="line"> 外网面板地址: https://x.x.x.x:21959/4e1c0984</span><br><span class="line"> 内网面板地址: https://192.168.0.132:21959/4e1c0984</span><br><span class="line"> username: mfyqjwso</span><br><span class="line"> password: xxxxxxxx</span><br><span class="line">==================================================================</span><br></pre></td></tr></table></figure><h2 id="安装勾股OA运行环境">安装<code>勾股OA</code>运行环境</h2><blockquote><p>我这里选择均是：<code>编译安装</code></p></blockquote><ul><li>PHP 8.0.26</li><li>MySQL 5.7.44</li><li>Nginx 1.24.0</li></ul><p><img src="/mblog/28055/Snipaste_2025-01-16_10-56-10.png" alt></p><h3 id="安装PHP扩展fileinfo">安装<code>PHP</code>扩展<code>fileinfo</code></h3><blockquote><p>在PHP的编译安装完成后，点击宝塔<code>软件商店</code>中选择<code>php</code>在点击<code>设置</code></p></blockquote><p><img src="/mblog/28055/Snipaste_2025-01-16_10-59-00.png" alt></p><h3 id="移除禁用函数">移除禁用函数</h3><p>如果在<code>禁用列表</code>里，移除<code>putenv</code>、<code>proc_open</code>然后退出，<code>重启php</code></p><p><img src="/mblog/28055/Snipaste_2025-01-16_11-04-06.png" alt></p><p><img src="/mblog/28055/Snipaste_2025-01-16_11-05-11.png" alt></p><h2 id="创建勾股OA数据库">创建<code>勾股OA</code>数据库</h2><blockquote><p>先创建一个数据库，后续初始化时候会更新数据库结构和数据。</p></blockquote><p><img src="/mblog/28055/Snipaste_2025-01-16_11-06-16.png" alt></p><h2 id="下载勾股OA的项目文件">下载<code>勾股OA</code>的项目文件</h2><h3 id="安装依赖">安装依赖</h3><p>网站根目录</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd /www/wwwroot</span><br></pre></td></tr></table></figure><p>克隆项目仓库</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://gitee.com/gouguopen/office.git</span><br></pre></td></tr></table></figure><p>跳转到<code>office</code>根目录</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd /www/wwwroot/office</span><br></pre></td></tr></table></figure><blockquote><p>设置腾讯云镜像</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">composer config -g repos.packagist composer https://mirrors.tencent.com/composer/</span><br></pre></td></tr></table></figure><p>安装PHP依赖包</p><blockquote><p>不用通过宝塔的界面去执行，直接在服务器命令行里执行更快。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">composer install</span><br></pre></td></tr></table></figure><h3 id="设置权限">设置权限</h3><blockquote><p>移除权限</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chattr -i /www/wwwroot/office/.user.ini</span><br></pre></td></tr></table></figure><blockquote><p>设置目录归属和权限</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chmod -R 755 /www/wwwroot/office/</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chown -R www:www /www/wwwroot/office/</span><br></pre></td></tr></table></figure><p>不设置，导致的报错（如图）：</p><blockquote><p>此类问题，需要开启<a href="https://blog.gougucms.com/home/book/detail/bid/3/id/77.html">debug</a>模式排查问题；</p></blockquote><p><img src="/mblog/28055/Snipaste_2025-01-16_11-15-00.png" alt></p><h2 id="添加网站配置">添加网站配置</h2><p>域名<br><img src="/mblog/28055/Snipaste_2025-01-16_11-35-58.png" alt></p><p>网站目录<br><img src="/mblog/28055/Snipaste_2025-01-16_11-36-46.png" alt></p><p>伪静态<br><img src="/mblog/28055/Snipaste_2025-01-16_11-37-19.png" alt></p><h2 id="访问安装">访问安装</h2><p><img src="/mblog/28055/Snipaste_2025-01-16_11-38-53.png" alt></p><p><img src="/mblog/28055/Snipaste_2025-01-16_11-40-03.png" alt></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.gougucms.com/home/book/detail/bid/3/id/8.html&quot;&gt;勾股OA官方文档&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/mfkd1000/article/</summary>
      
    
    
    
    <category term="开源项目" scheme="https://blog.wo0ow.com/categories/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/"/>
    
    
  </entry>
  
  <entry>
    <title>IIS解决跨域问题</title>
    <link href="https://blog.wo0ow.com/mblog/3933.html"/>
    <id>https://blog.wo0ow.com/mblog/3933.html</id>
    <published>2025-01-14T03:16:29.000Z</published>
    <updated>2025-01-16T03:41:25.613Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.cnblogs.com/unlockth/p/16073406.html">IIS 跨域访问的设置 </a></p><hr><p>设置跨域的内容</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Access-Control-Allow-Headers:Content-Type</span><br><span class="line">Access-Control-Allow-Methods:GET,POST,PUT,DELETE,OPTIONS</span><br><span class="line">Access-Control-Allow-Origin:*</span><br></pre></td></tr></table></figure><p>设置界面<br><img src="https://img2022.cnblogs.com/blog/771906/202203/771906-20220329191132072-937983205.png" alt></p><p>设置完成<br><img src="https://img2022.cnblogs.com/blog/771906/202203/771906-20220329191155613-1286888738.png" alt></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/unlockth/p/16073406.html&quot;&gt;IIS 跨域访问的设置 &lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;设置跨域的内容&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>Nginx配置双主模式</title>
    <link href="https://blog.wo0ow.com/mblog/26338.html"/>
    <id>https://blog.wo0ow.com/mblog/26338.html</id>
    <published>2025-01-13T03:29:09.000Z</published>
    <updated>2025-01-19T01:57:13.017Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/MassiveStars/article/details/54290055">配置nginx + keepalived双主模式（双机互为主备）</a></p><p><a href="https://blog.csdn.net/weixin_52270081/article/details/118341576">Linux搭建nginx+keepalived 高可用(主备+双主模式)</a></p><p><a href="https://www.cnblogs.com/sandyflower/p/14974489.html">keepalived 学习笔记（三）vrrp包通过防火墙</a></p><hr><blockquote><p>当前博客内容仅作参考，不完善！不能作为完整的教程！待后续更新~</p></blockquote><hr><h2 id="安装keepalived">安装keepalived</h2><p>安装<code>yum -y install keepalived</code></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum -y install keepalived</span><br></pre></td></tr></table></figure><p>启动命令</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">service keepalived start</span><br></pre></td></tr></table></figure><p>查看<code>keepalived</code>状态</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">service keepalived status</span><br></pre></td></tr></table></figure><h2 id="keepalived配置文件基础配置">keepalived配置文件基础配置</h2><p>原配置文件：<code>/etc/keepalived/keepalived.conf</code></p><p>备份原配置文件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cp /etc/keepalived/keepalived.conf /etc/keepalived/keepalived.conf.bak</span><br><span class="line">vim /etc/keepalived/keepalived.conf</span><br></pre></td></tr></table></figure><ul><li>global_defs 全局模块</li><li>vrrp_instance 配置vip模块</li><li>vrrp_script 脚本模块，用来检测nginx服务</li></ul><h3 id="主备模式">主备模式</h3><p>主备模式的配置文件区别：</p><ul><li>不同</li><li><ul><li>router_id</li></ul></li><li><ul><li>state</li></ul></li><li><ul><li>priority</li></ul></li><li>相同</li><li><ul><li>virtual_router_id</li></ul></li></ul><p>主nginx</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">global_defs &#123;         </span><br><span class="line">   # #机器标识，通常可设为hostname，故障发生时，邮件通知会用到。</span><br><span class="line">   router_id Nginx_01</span><br><span class="line">&#125;</span><br><span class="line">vrrp_script check_nginx &#123;</span><br><span class="line">    # 检测脚本</span><br><span class="line">    script &quot;/etc/keepalived/check_nginx.sh&quot;</span><br><span class="line">    # 每2s检测一次</span><br><span class="line">    interval 2</span><br><span class="line">    # 检测失败（脚本返回非0）则优先级 -5</span><br><span class="line">    weight -5</span><br><span class="line">    # 检测连续 2 次失败才算确定是真失败。会用weight减少优先级（1-255之间）</span><br><span class="line">    fall 3</span><br><span class="line">    # 检测 1 次成功就算成功。但不修改优先级</span><br><span class="line">    rise 2</span><br><span class="line">&#125;</span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">    # 指定instance(Initial)的初始状态， MASTER 或者BACKUP</span><br><span class="line">    state MASTER</span><br><span class="line">    # 实例绑定的网卡，因为在配置虚拟IP的时候必须是在已有的网卡上添加的，(注意自己系统，我的默认是ens33,有的是eth0)</span><br><span class="line">    interface ens33</span><br><span class="line">    # 发送多播数据包时的源IP地址</span><br><span class="line">    virtual_router_id 51</span><br><span class="line">    # 设置本节点的优先级，优先级高的为master（1-255）</span><br><span class="line">    priority 150</span><br><span class="line">    # 检查间隔，默认为1秒。这就是VRRP的定时器，MASTER每隔这样一个时间间隔，就会发送一个advertisement报文以通知组内其他路由器自己工作正常</span><br><span class="line">    advert_int 1</span><br><span class="line">    # 定义认证方式和密码，主从必须一样</span><br><span class="line">    authentication &#123;</span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass 1111</span><br><span class="line">    &#125;</span><br><span class="line">    # 这里设置的就是VIP，也就是虚拟IP地址，他随着state的变化而增加删除，当state为master的时候就添加，当state为backup的时候删除，这里主要是有优先级来决定的，和state设置的值没有多大关系，这里可以设置多个IP地址</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">     192.168.200.200</span><br><span class="line">    &#125;</span><br><span class="line">    # 引用VRRP脚本，即在 vrrp_script 部分指定的名字。定期运行它们来改变优先级，并最终引发主备切换</span><br><span class="line">    track_script &#123;</span><br><span class="line">    check_nginx</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>备nginx</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">global_defs &#123;               </span><br><span class="line">   router_id Nginx_02</span><br><span class="line">&#125;</span><br><span class="line">vrrp_script check_nginx &#123;</span><br><span class="line">script &quot;/etc/keepalived/check_nginx.sh&quot;</span><br><span class="line">interval 2</span><br><span class="line">    weight -5</span><br><span class="line">    fall 3</span><br><span class="line">    rise 2</span><br><span class="line">&#125;</span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">    state BACKUP</span><br><span class="line">    interface ens33</span><br><span class="line">    virtual_router_id 51</span><br><span class="line">    priority 100</span><br><span class="line">    advert_int 1</span><br><span class="line">    authentication &#123;</span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass 1111</span><br><span class="line">    &#125;</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">      192.168.200.200</span><br><span class="line">    &#125;</span><br><span class="line">    track_script &#123;</span><br><span class="line">    check_nginx</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="双主模式">双主模式</h3><hr><p>创建目录</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir -p /usr/local/keepalived/scripts/</span><br></pre></td></tr></table></figure><p>监控脚本 <code>monitor_nginx.sh</code></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 监控nginx进程，若nginx主进程不存在则启动nginx</span><br><span class="line"># 若5s后nginx进程还是不存在的话kill掉keepalived进程,防止nginx没运行该主机的keepalived还接管虚拟IP</span><br><span class="line">#!/bin/bash</span><br><span class="line">if [ &quot;$(ps -ef | grep &quot;nginx: master process&quot;| grep -v grep )&quot; == &quot;&quot; ]</span><br><span class="line">        then</span><br><span class="line">        /usr/local/nginx/sbin/nginx</span><br><span class="line">        sleep 5</span><br><span class="line">        if [ &quot;$(ps -ef | grep &quot;nginx: master process&quot;| grep -v grep )&quot; == &quot;&quot; ]</span><br><span class="line">        then</span><br><span class="line">                  killall keepalived</span><br><span class="line">        fi</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p><code>keepalived</code>文件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/keepalived/keepalived.conf</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">global_defs</span><br><span class="line">&#123;</span><br><span class="line">    notification_email</span><br><span class="line">    &#123;</span><br><span class="line">       123456@qq.com</span><br><span class="line">    &#125;</span><br><span class="line">    notification_email_from 123456@qq.com</span><br><span class="line">    smtp_server 127.0.0.1</span><br><span class="line">    stmp_connect_timeout 30</span><br><span class="line">    router_id LVS_DEVEL</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vrrp_script Monitor_Nginx &#123;</span><br><span class="line">    script &quot;/usr/local/keepalived/scripts/monitor_nginx.sh&quot;</span><br><span class="line">    interval 2</span><br><span class="line">    weight 2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 虚拟IP1, 本机作为Master</span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">    state MASTER</span><br><span class="line">    interface enp0s3</span><br><span class="line">    virtual_router_id 51</span><br><span class="line">    priority 100</span><br><span class="line">    advert_int 1</span><br><span class="line">    track_interface &#123;</span><br><span class="line">        enp0s3</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    authentication &#123;</span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass 123456</span><br><span class="line">    &#125;</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">        192.168.30.51</span><br><span class="line">    &#125;i</span><br><span class="line">    track_script &#123;</span><br><span class="line">        Monitor_Nginx</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 虚拟IP2, 本机作为Backup</span><br><span class="line">vrrp_instance VI_2 &#123;</span><br><span class="line">    state BACKUP</span><br><span class="line">    interface enp0s3</span><br><span class="line">    virtual_router_id 52</span><br><span class="line">    priority 100</span><br><span class="line">    advert_int 1</span><br><span class="line">    track_interface &#123;</span><br><span class="line">        enp0s3</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    authentication &#123;</span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass 123456</span><br><span class="line">    &#125;</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">        192.168.30.52</span><br><span class="line">    &#125;</span><br><span class="line">    track_script &#123;</span><br><span class="line">        Monitor_Nginx</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/MassiveStars/article/details/54290055&quot;&gt;配置nginx + keepalived双主模式（双机互为主备）&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.c</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>WSL的Linux系统开启远程访问</title>
    <link href="https://blog.wo0ow.com/mblog/19394.html"/>
    <id>https://blog.wo0ow.com/mblog/19394.html</id>
    <published>2025-01-13T01:20:32.000Z</published>
    <updated>2025-01-16T03:41:25.610Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/tzsm11/article/details/137093575">Windows开启（WSL）Linux子系统并远程连接SSH</a></p><p><a href="https://blog.csdn.net/weixin_41471014/article/details/121620198">Ubuntu 20.04 开启 root 远程登录</a></p><p>编辑配置文件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><p>修改配置</p><blockquote><p>变更<code>PermitRootLogin prohibit-password</code> 为 <code>yes</code></p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Port 22</span><br><span class="line">PermitRootLogin yes</span><br><span class="line">PasswordAuthentication yes</span><br><span class="line">PermitEmptyPasswords no</span><br></pre></td></tr></table></figure><p>验证配置<br><img src="/mblog/19394/Snipaste_2025-01-13_09-23-50.png" alt></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/tzsm11/article/details/137093575&quot;&gt;Windows开启（WSL）Linux子系统并远程连接SSH&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>Linux下搭建开源项目_勾股OA办公系统</title>
    <link href="https://blog.wo0ow.com/mblog/24462.html"/>
    <id>https://blog.wo0ow.com/mblog/24462.html</id>
    <published>2025-01-10T06:01:58.000Z</published>
    <updated>2025-01-19T01:55:40.754Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://gitee.com/gouguopen/office">开源项目-勾股OA办公系统</a></p><p><a href="https://blog.csdn.net/2301_79009758/article/details/137155234">Linux 系统快速安装PHP环境（新手版）</a></p><p><a href="https://www.php.net/downloads.php">PHP官方下载地址</a></p><hr><p><s><strong>注意</strong>：请参考通过宝塔搭建勾股OA开源系统，此博客内容不完善且已不再更新!</s></p><hr><p>服务器环境配置信息</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">PHP &gt;= 8.0</span><br><span class="line">Mysql &gt;= 5.7.0 (需支持innodb引擎)  </span><br><span class="line">Apache 或 Nginx  </span><br><span class="line">PDO PHP Extension  </span><br><span class="line">MBstring PHP Extension  </span><br><span class="line">CURL PHP Extension  </span><br><span class="line">FileInfo PHP Extension</span><br><span class="line">Composer (用于管理第三方扩展包)</span><br></pre></td></tr></table></figure><h2 id="PHP环境安装">PHP环境安装</h2><p>安装依赖</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum -y install libxml2 libxml2-devel openssl openssl-devel bzip2 bzip2-devel libcurl libcurl-devel libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel gmp gmp-devel libmcrypt libmcrypt-devel readline readline-devel libxslt libxslt-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel ncurses curl gdbm-devel db4-devel libXpm-devel libX11-devel gd-devel gmp-devel expat-devel xmlrpc-c xmlrpc-c-devel libicu-devel libmcrypt-devel libmemcached-devel libzip gcc-c++</span><br></pre></td></tr></table></figure><p>下载PHP</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget https://www.php.net/distributions/php-8.4.2.tar.gz</span><br></pre></td></tr></table></figure><p>解压</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tar -zxf php-8.4.2.tar.gz -C /usr/local/</span><br></pre></td></tr></table></figure><p>编译</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd /usr/local/php-8.4.2/</span><br></pre></td></tr></table></figure><p>编译命令</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./configure  \</span><br><span class="line">--prefix=/usr/local/php \</span><br><span class="line">--with-config-file-path=/usr/local/php/lib \</span><br><span class="line">--with-fpm-user=nginx \</span><br><span class="line">--with-fpm-group=nginx \</span><br><span class="line">--enable-fpm \</span><br><span class="line">--enable-opcache \</span><br><span class="line">--disable-debug \</span><br><span class="line">--disable-rpath \</span><br><span class="line">--enable-shared \</span><br><span class="line">--enable-mysqlnd \</span><br><span class="line">--with-mysqli=mysqlnd \</span><br><span class="line">--with-pdo-mysql=mysqlnd \</span><br><span class="line">--enable-mysqlnd-compression-support \</span><br><span class="line">--with-zlib \</span><br><span class="line">--enable-xml \</span><br><span class="line">--disable-rpath \</span><br><span class="line">--enable-bcmath \</span><br><span class="line">--enable-shmop \</span><br><span class="line">--enable-sysvsem \</span><br><span class="line">--with-curl \</span><br><span class="line">--enable-mbregex \</span><br><span class="line">--enable-mbstring \</span><br><span class="line">--enable-intl \</span><br><span class="line">--enable-ftp \</span><br><span class="line">--enable-gd \</span><br><span class="line">--enable-gd-jis-conv \</span><br><span class="line">--with-jpeg   \</span><br><span class="line">--with-freetype  \</span><br><span class="line">--with-openssl \</span><br><span class="line">--with-mhash \</span><br><span class="line">--enable-pcntl \</span><br><span class="line">--enable-sockets \</span><br><span class="line">--with-zip \</span><br><span class="line">--enable-soap \</span><br><span class="line">--with-gettext \</span><br><span class="line">--disable-fileinfo \</span><br><span class="line">--with-pear \</span><br><span class="line">--with-ldap=shared \</span><br><span class="line">--without-gdbm </span><br></pre></td></tr></table></figure><p><img src="/mblog/24462/Snipaste_2025-01-10_15-37-33.png" alt></p><p>安装</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><blockquote><p>报错，无法正常安装</p></blockquote><h2 id="通过yum方式安装php环境">通过yum方式安装php环境</h2><p><a href="https://blog.csdn.net/u010839420/article/details/114536587">【PHP】CentOS 7使用yum安装php8.0及以上版本</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install php-cli php-common php-fpm php-json php-mysqlnd php-xml php-gd php-mbstring php-zip -y</span><br></pre></td></tr></table></figure><h3 id="配置PHP-FPM">配置PHP-FPM</h3><p><a href="https://blog.csdn.net/weixin_41380972/article/details/134692147">ERROR: [pool www] please specify user and group other than root</a></p><p><a href="https://www.oryoy.com/news/centos-xi-tong-xia-shi-yong-yum-an-zhuang-php-ji-qi-dong-pei-zhi-xiang-jie.html">CentOS系统下使用Yum安装PHP及启动配置详解</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/php-fpm.d/www.conf</span><br></pre></td></tr></table></figure><blockquote><p>如果你的系统中没有 nginx 用户，你可以使用 nobody 或创建一个新的用户专门用于运行 PHP 进程。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">user = nobody</span><br><span class="line">group = nobody</span><br><span class="line">#listen = /var/run/php-fpm/php-fpm.sock</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl status php-fpm.service</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl start php-fpm.service</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ps -ef|grep php-fpm</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">netstat -tnl | grep 9000</span><br></pre></td></tr></table></figure><h2 id="Composer安装">Composer安装</h2><p><a href="https://www.runoob.com/w3cnote/composer-install-and-usage.html">Composer 安装与使用</a></p><p>安装</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">php -r &quot;copy(&#x27;https://install.phpcomposer.com/installer&#x27;, &#x27;composer-setup.php&#x27;);&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">php composer-setup.php</span><br></pre></td></tr></table></figure><p>配置全局调用</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mv composer.phar /usr/local/bin/composer</span><br></pre></td></tr></table></figure><h2 id="安装office依赖">安装<code>office</code>依赖</h2><blockquote><p>cd <code>git clone https://gitee.com/gougucms/office.git</code>的目录下</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">composer install  </span><br></pre></td></tr></table></figure><h2 id="错误记录">错误记录</h2><h3 id="安装PHP环境报错">安装PHP环境报错</h3><h4 id="libxml-2-0-2-9-4…-no">libxml-2.0 &gt;= 2.9.4… no</h4><p>报错信息：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">checking for libxml-2.0 &gt;= 2.9.4... no</span><br><span class="line">configure: error: Package requirements (libxml-2.0 &gt;= 2.9.4) were not met:</span><br><span class="line"></span><br><span class="line">Requested &#x27;libxml-2.0 &gt;= 2.9.4&#x27; but version of libXML is 2.9.1</span><br><span class="line"></span><br><span class="line">Consider adjusting the PKG_CONFIG_PATH environment variable if you</span><br><span class="line">installed software in a non-standard prefix.</span><br><span class="line"></span><br><span class="line">Alternatively, you may set the environment variables LIBXML_CFLAGS</span><br><span class="line">and LIBXML_LIBS to avoid the need to call pkg-config.</span><br><span class="line">See the pkg-config man page for more details.</span><br></pre></td></tr></table></figure><p><img src="/mblog/24462/Snipaste_2025-01-10_14-19-18.png" alt></p><hr><p>官方地址<a href="http://xmlsoft.org/sources/">libxml2</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget http://xmlsoft.org/sources/libxml2-2.9.12.tar.gz</span><br><span class="line">tar -xzvf libxml2-2.9.12.tar.gz</span><br><span class="line">cd libxml2-2.9.12</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim ~/.bashrc</span><br></pre></td></tr></table></figure><p>设置 PKG_CONFIG_PATH 环境变量</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig:$PKG_CONFIG_PATH</span><br></pre></td></tr></table></figure><p>设置 LIBXML_CFLAGS 和 LIBXML_LIBS 环境变量</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export LIBXML_CFLAGS=$(xml2-config --cflags)</span><br><span class="line">export LIBXML_LIBS=$(xml2-config --libs)</span><br></pre></td></tr></table></figure><p>应用环境变量</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure><p>验证安装</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pkg-config --modversion libxml-2.0</span><br></pre></td></tr></table></figure><h4 id="Python-h-No-such-file-or-directory">Python.h: No such file or directory</h4><p>报错信息：</p><p>这个错误表明在编译 libxml2 时缺少 Python 开发头文件。你需要安装 Python 开发包。以下是在不同 Linux 发行版上安装 Python 开发包的方法</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">make[4]: Entering directory `/opt/php/libxml2-2.9.12/python&#x27;</span><br><span class="line">  CC       libxml.lo</span><br><span class="line">libxml.c:15:20: fatal error: Python.h: No such file or directory</span><br><span class="line"> #include &lt;Python.h&gt;</span><br><span class="line">                    ^</span><br><span class="line">compilation terminated.</span><br><span class="line">make[4]: *** [libxml.lo] Error 1</span><br><span class="line">make[4]: Leaving directory `/opt/php/libxml2-2.9.12/python&#x27;</span><br><span class="line">make[3]: *** [all-recursive] Error 1</span><br><span class="line">make[3]: Leaving directory `/opt/php/libxml2-2.9.12/python&#x27;</span><br><span class="line">make[2]: *** [all] Error 2</span><br><span class="line">make[2]: Leaving directory `/opt/php/libxml2-2.9.12/python&#x27;</span><br><span class="line">make[1]: *** [all-recursive] Error 1</span><br><span class="line">make[1]: Leaving directory `/opt/php/libxml2-2.9.12&#x27;</span><br><span class="line">make: *** [all] Error 2</span><br></pre></td></tr></table></figure><p><img src="/mblog/24462/Snipaste_2025-01-10_14-17-17.png" alt></p><p>CentOS/RHEL：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo yum install python-devel</span><br><span class="line">sudo yum install python3-devel  # 如果你使用的是 Python 3</span><br></pre></td></tr></table></figure><p>Ubuntu/Debian：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install python-dev</span><br><span class="line">sudo apt-get install python3-dev  # 如果你使用的是 Python 3</span><br></pre></td></tr></table></figure><h4 id="checking-for-openssl-1-1-1…-no">checking for openssl &gt;= 1.1.1… no</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">checking for openssl &gt;= 1.1.1... no</span><br><span class="line">configure: error: Package requirements (openssl &gt;= 1.1.1) were not met:</span><br><span class="line"></span><br><span class="line">Requested &#x27;openssl &gt;= 1.1.1&#x27; but version of OpenSSL is 1.0.2k</span><br><span class="line"></span><br><span class="line">Consider adjusting the PKG_CONFIG_PATH environment variable if you</span><br><span class="line">installed software in a non-standard prefix.</span><br><span class="line"></span><br><span class="line">Alternatively, you may set the environment variables OPENSSL_CFLAGS</span><br><span class="line">and OPENSSL_LIBS to avoid the need to call pkg-config.</span><br><span class="line">See the pkg-config man page for more details</span><br></pre></td></tr></table></figure><p><img src="/mblog/24462/Snipaste_2025-01-10_14-34-14.png" alt></p><p>步骤1：</p><p>博客：<a href="https://www.wo0ow.com/mblog/36981.html">Linux 下 OpenSSL1.x 版本升级 OpenSSL3.x 版本记录</a></p><p>步骤2：</p><blockquote><p>升级后，在<code>PHP</code>目录下执行<code>./configure</code>依然报错！</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim ~/.bashrc</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export PKG_CONFIG_PATH=/usr/local/openssl_3.3/lib64/pkgconfig:$PKG_CONFIG_PATH</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pkg-config --modversion openssl</span><br></pre></td></tr></table></figure><h4 id="checking-for-sqlite3-3-7-7…-no">checking for sqlite3 &gt;= 3.7.7… no</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">checking for sqlite3 &gt;= 3.7.7... no</span><br><span class="line">configure: error: Package requirements (sqlite3 &gt;= 3.7.7) were not met:</span><br><span class="line"></span><br><span class="line">No package &#x27;sqlite3&#x27; found</span><br><span class="line"></span><br><span class="line">Consider adjusting the PKG_CONFIG_PATH environment variable if you</span><br><span class="line">installed software in a non-standard prefix.</span><br><span class="line"></span><br><span class="line">Alternatively, you may set the environment variables SQLITE_CFLAGS</span><br><span class="line">and SQLITE_LIBS to avoid the need to call pkg-config.</span><br><span class="line">See the pkg-config man page for more details.</span><br></pre></td></tr></table></figure><p>安装</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install sqlite-devel</span><br></pre></td></tr></table></figure><p>验证</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pkg-config --modversion sqlite3</span><br></pre></td></tr></table></figure><h4 id="checking-for-zlib-1-2-11…-no">checking for zlib &gt;= 1.2.11… no</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">checking for zlib &gt;= 1.2.11... no</span><br><span class="line">configure: error: Package requirements (zlib &gt;= 1.2.11) were not met:</span><br><span class="line"></span><br><span class="line">Requested &#x27;zlib &gt;= 1.2.11&#x27; but version of zlib is 1.2.7</span><br><span class="line"></span><br><span class="line">Consider adjusting the PKG_CONFIG_PATH environment variable if you</span><br><span class="line">installed software in a non-standard prefix.</span><br><span class="line"></span><br><span class="line">Alternatively, you may set the environment variables ZLIB_CFLAGS</span><br><span class="line">and ZLIB_LIBS to avoid the need to call pkg-config.</span><br><span class="line">See the pkg-config man page for more details.</span><br></pre></td></tr></table></figure><p>重新安装</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget http://www.zlib.net/zlib-1.3.1.tar.gz</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pkg-config --modversion zlib</span><br></pre></td></tr></table></figure><h4 id="checking-for-libcurl-7-61-0…-no">checking for libcurl &gt;= 7.61.0… no</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">checking for libcurl &gt;= 7.61.0... no</span><br><span class="line">configure: error: Package requirements (libcurl &gt;= 7.61.0) were not met:</span><br><span class="line"></span><br><span class="line">Requested &#x27;libcurl &gt;= 7.61.0&#x27; but version of libcurl is 7.29.0</span><br><span class="line">You may find new versions of libcurl at http://curl.haxx.se/</span><br><span class="line"></span><br><span class="line">Consider adjusting the PKG_CONFIG_PATH environment variable if you</span><br><span class="line">installed software in a non-standard prefix.</span><br><span class="line"></span><br><span class="line">Alternatively, you may set the environment variables CURL_CFLAGS</span><br><span class="line">and CURL_LIBS to avoid the need to call pkg-config.</span><br><span class="line">See the pkg-config man page for more details.</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget https://curl.se/download/curl-7.61.0.tar.gz</span><br><span class="line">tar -xzvf curl-7.61.0.tar.gz</span><br><span class="line">cd curl-7.61.0</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pkg-config --modversion libcurl</span><br></pre></td></tr></table></figure><h4 id="Cannot-find-ldap-libraries-in-usr-lib-和-Cannot-find-ldap-libraries-in-usr-lib">Cannot find ldap libraries in /usr/lib. 和 Cannot find ldap libraries in /usr/lib.</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">configure: error: c</span><br><span class="line">configure: error: Cannot find ldap libraries in /usr/lib.</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install openldap-devel</span><br></pre></td></tr></table></figure><blockquote><p><a href="https://blog.csdn.net/github_38336924/article/details/89335061">configure: error: Cannot find ldap libraries in /usr/lib</a></p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cp -frp /usr/lib64/libldap* /usr/lib/</span><br></pre></td></tr></table></figure><h4 id="checking-for-oniguruma…-no">checking for oniguruma… no</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">checking for oniguruma... no</span><br><span class="line">configure: error: Package requirements (oniguruma) were not met:</span><br><span class="line"></span><br><span class="line">No package &#x27;oniguruma&#x27; found</span><br><span class="line"></span><br><span class="line">Consider adjusting the PKG_CONFIG_PATH environment variable if you</span><br><span class="line">installed software in a non-standard prefix.</span><br><span class="line"></span><br><span class="line">Alternatively, you may set the environment variables ONIG_CFLAGS</span><br><span class="line">and ONIG_LIBS to avoid the need to call pkg-config.</span><br><span class="line">See the pkg-config man page for more details.</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="https://www.cnblogs.com/wanglijun/p/12560614.html">安装PHP7.4找不到 No package ‘oniguruma’ found解决</a></p><p><a href="https://blog.csdn.net/h799710/article/details/113101458">已安装 autoconf 还是提示 ./autogen.sh: autoreconf: not found</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo yum install -y autoconf automake libtool</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget https://github.com/kkos/oniguruma/archive/v6.9.4.tar.gz -O oniguruma-6.9.4.tar.gz </span><br><span class="line"></span><br><span class="line">tar -zxvf oniguruma-6.9.4.tar.gz</span><br><span class="line"></span><br><span class="line">cd oniguruma-6.9.4/</span><br><span class="line"></span><br><span class="line">./autogen.sh</span><br><span class="line"></span><br><span class="line">./configure</span><br><span class="line"></span><br><span class="line">make</span><br><span class="line"></span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure><h4 id="libzip-0-11-libzip-1-3-1-libzip-1-7-0…">libzip &gt;= 0.11 libzip != 1.3.1 libzip != 1.7.0…</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">checking for libzip &gt;= 0.11 libzip != 1.3.1 libzip != 1.7.0... no</span><br><span class="line">configure: error: Package requirements (libzip &gt;= 0.11 libzip != 1.3.1 libzip != 1.7.0) were not met:</span><br><span class="line"></span><br><span class="line">No package &#x27;libzip&#x27; found</span><br><span class="line">No package &#x27;libzip&#x27; found</span><br><span class="line">No package &#x27;libzip&#x27; found</span><br><span class="line"></span><br><span class="line">Consider adjusting the PKG_CONFIG_PATH environment variable if you</span><br><span class="line">installed software in a non-standard prefix.</span><br><span class="line"></span><br><span class="line">Alternatively, you may set the environment variables LIBZIP_CFLAGS</span><br><span class="line">and LIBZIP_LIBS to avoid the need to call pkg-config.</span><br><span class="line">See the pkg-config man page for more details.</span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/robin_cai/article/details/118151747">报错：Package requirements (libzip ＞= 0.11 libzip != 1.3.1 libzip != 1.7.0) were not met<br></a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget https://libzip.org/download/libzip-1.3.2.tar.gz</span><br><span class="line">tar xvf libzip-1.3.2.tar.gz</span><br><span class="line">cd libzip-1.3.2</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://gitee.com/gouguopen/office&quot;&gt;开源项目-勾股OA办公系统&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/2301_79009758/article/details/137155</summary>
      
    
    
    
    <category term="开源项目" scheme="https://blog.wo0ow.com/categories/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/"/>
    
    
  </entry>
  
  <entry>
    <title>麒麟LinuxV10修改ulmit句柄数</title>
    <link href="https://blog.wo0ow.com/mblog/56689.html"/>
    <id>https://blog.wo0ow.com/mblog/56689.html</id>
    <published>2025-01-08T08:18:32.000Z</published>
    <updated>2025-01-20T04:16:13.887Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/weixin_43092290/article/details/134504638">KylinOSv10修改ulimit值</a></p><p><a href="https://blog.csdn.net/weixin_45754407/article/details/132752629">银河麒麟高级服务器操作系统（通用）修改open file默认值</a></p><p><a href="https://www.cnblogs.com/whwywzhj/p/14144349.html">linux修改文件句柄数量</a></p><hr><blockquote><p>查询麒麟系统版本信息</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nkvers</span><br></pre></td></tr></table></figure><blockquote><p>查询句柄数</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ulimit -n</span><br></pre></td></tr></table></figure><p>Linux的默认句柄数：<code>1024</code></p><h1>centos 6.x</h1><h2 id="修改句柄数（用户级）">修改句柄数（用户级）</h2><p>编辑<code>limits.conf</code>文件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /etc/security/limits.conf</span><br></pre></td></tr></table></figure><p>增加配置</p><ul><li><code>*</code> 表示对所有用户生效</li><li><code>soft</code> 代表警告的设定，可以超过这个设定值，但是超过后会有警告</li><li><code>hard</code> 代表严格的设定，不允许超过这个设定的值</li></ul><blockquote><p>单个命令修改配置</p></blockquote><p>单个用户可用的最大进程数量(超过会警告)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo &quot;* soft nofile 65535&quot;  &gt;&gt; /etc/security/limits.conf</span><br></pre></td></tr></table></figure><p>单个用户可用的最大进程数量(超过会报错)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo &quot;* hard nofile 65535&quot;  &gt;&gt; /etc/security/limits.conf</span><br></pre></td></tr></table></figure><p>可打开的文件描述符的最大数(超过会警告)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo &quot;* soft nproc 65535&quot;   &gt;&gt; /etc/security/limits.conf</span><br></pre></td></tr></table></figure><p>可打开的文件描述符的最大数(超过会报错)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo &quot;* hard nproc 65535 &quot;  &gt;&gt; /etc/security/limits.conf</span><br></pre></td></tr></table></figure><blockquote><p>或直接添加以下配置：</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">* soft nofile 65535  </span><br><span class="line">* hard nofile 65535</span><br><span class="line">* soft nproc 65535</span><br><span class="line">* hard nproc 65535</span><br></pre></td></tr></table></figure><p>重启服务器</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure><p>查看修改是否生效</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ulimit -n</span><br></pre></td></tr></table></figure><h2 id="修改句柄数（系统级）">修改句柄数（系统级）</h2><p>修改文件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/sysctl.conf</span><br></pre></td></tr></table></figure><p>增加配置</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fs.file-max=65535</span><br></pre></td></tr></table></figure><blockquote><p>或通过命令直接添加</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo fs.file-max=65535 &gt;&gt; /etc/sysctl.conf</span><br></pre></td></tr></table></figure><p>重启服务器</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure><p>查询系统级文件句柄数是否生效</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sysctl -p</span><br></pre></td></tr></table></figure><h1>centos 7.x</h1><p><a href="https://blog.csdn.net/mao2553319/article/details/106218054">centos7设置进程文件句柄数量</a></p><p><a href="https://blog.csdn.net/weixin_34009794/article/details/92102733">centos7设置进程文件句柄数量</a></p><p><a href="https://blog.csdn.net/gzliudan/article/details/51754701">centos 7.x设置守护进程的文件数量限制</a></p><blockquote><p>注意：需单独修改某个service进程，以上博客也包含当前内容</p></blockquote><hr><p>修改文件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /etc/systemd/system.conf</span><br></pre></td></tr></table></figure><p>新增配置</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DefaultLimitCORE=infinity</span><br><span class="line">DefaultLimitNOFILE=65535</span><br><span class="line">DefaultLimitNPROC=65535</span><br></pre></td></tr></table></figure><p><strong>注意：需要-重启服务器</strong></p><hr><p>重启后，验证句柄数</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ulimit -n</span><br></pre></td></tr></table></figure><p>查询进程limit进程数限制：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat /proc/YOUR-PID/limits</span><br></pre></td></tr></table></figure><blockquote><p>图例：未修改句柄数前</p></blockquote><p><img src="/mblog/56689/Snipaste_2025-01-16_22-29-45.png" alt></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/weixin_43092290/article/details/134504638&quot;&gt;KylinOSv10修改ulimit值&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/w</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>Mysql中查询JSON格式数据</title>
    <link href="https://blog.wo0ow.com/mblog/22493.html"/>
    <id>https://blog.wo0ow.com/mblog/22493.html</id>
    <published>2024-12-30T10:59:35.000Z</published>
    <updated>2024-12-30T11:09:22.082Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/w15201128473/article/details/129726597">MYSQL 解析json数据，并且查询json数组筛选符合条件的日期</a></p><p><a href="https://blog.csdn.net/weixin_40201536/article/details/140915977">MySQL判断json数据中是否包含某个值</a></p><p><a href="https://blog.csdn.net/qq_21187515/article/details/90760337">mysql根据json字段内容作为查询条件（包括json数组），检索数据</a></p><hr><p>需求：查询条件满足<code>label=&#39;完成&#39;</code>的记录。</p><p>Mysql数据库，字段格式示例截图：<br><img src="/mblog/22493/Snipaste_2024-12-30_19-01-49.png"></p><p>字段数据格式：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[&#123;&quot;id&quot;: &quot;end1668393057508&quot;, &quot;label&quot;: &quot;完成&quot;, &quot;processor&quot;: [], &quot;process_method&quot;: &quot;&quot;&#125;]</span><br></pre></td></tr></table></figure><p>实现SQL：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">     * </span><br><span class="line">FROM</span><br><span class="line">     p_work_order_info </span><br><span class="line">WHERE</span><br><span class="line">     JSON_CONTAINS(JSON_EXTRACT(state, &quot;$[0]&quot;), &#x27;&quot;完成&quot;&#x27;, &#x27;$.label&#x27;) = 1</span><br></pre></td></tr></table></figure><p>解析：</p><p>一. 通过函数方法<code>JSON_EXTRACT(state, &quot;$[0]&quot;)</code>去解析数据格式<code>[&#123;&quot;id&quot;: &quot;end1668393057508&quot;, &quot;label&quot;: &quot;完成&quot;, &quot;processor&quot;: [], &quot;process_method&quot;: &quot;&quot;&#125;]</code>的array的json数组，取下标<code>[0]</code>的第一组匹配json数据。</p><p>二. 通过函数方法<code>JSON_CONTAINS( &lt;json数据对象&gt; , &#39;&quot;完成&quot;&#39;, &#39;$.label&#39;)</code>,匹配json中的关键字<code>label</code>并判断是否包含<code>完成</code>的字符串。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/w15201128473/article/details/129726597&quot;&gt;MYSQL 解析json数据，并且查询json数组筛选符合条件的日期&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blo</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>Windows下部署安装MongoDB</title>
    <link href="https://blog.wo0ow.com/mblog/56205.html"/>
    <id>https://blog.wo0ow.com/mblog/56205.html</id>
    <published>2024-12-20T06:37:01.000Z</published>
    <updated>2024-12-20T07:35:34.872Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.cnblogs.com/TM0831/p/10606624.html">最详细的Windows平台安装MongoDB教程</a></p><p><a href="https://blog.csdn.net/hbtj_1216/article/details/120875957">MongoDB设置登录账号和密码</a></p><hr><p>从<a href="https://www.mongodb.com/try/download/community">MongoDB Community</a>下载windows安装文件</p><p><img src="/mblog/56205/Snipaste_2024-12-20_14-50-44.png"></p><p>环境变量<code>path</code>添加<code>D:\WorkSpace\db\mongoDB\bin</code></p><p><img src="/mblog/56205/Snipaste_2024-12-20_14-46-20.png"></p><p>创建目录<code>data</code>,<code>db</code>,<code>log</code></p><p><img src="/mblog/56205/Snipaste_2024-12-20_14-44-32.png"></p><p>安装服务</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mongod --dbpath D:\WorkSpace\db\mongoDB\db --logpath D:\WorkSpace\db\mongoDB\log\mongo.log -install -serviceName &quot;MongoDB&quot;</span><br></pre></td></tr></table></figure><p>验证mongoDB启动,浏览器访问：<code>http://127.0.0.1:27017/</code></p><p><img src="/mblog/56205/Snipaste_2024-12-20_14-48-11.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/TM0831/p/10606624.html&quot;&gt;最详细的Windows平台安装MongoDB教程&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/hbtj_1216/art</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>moyu-API管理工具的私有部署</title>
    <link href="https://blog.wo0ow.com/mblog/10518.html"/>
    <id>https://blog.wo0ow.com/mblog/10518.html</id>
    <published>2024-12-20T05:58:21.000Z</published>
    <updated>2024-12-22T10:47:09.059Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/trueleaf/moyu">moyu-前端</a></p><p><a href="https://github.com/trueleaf/moyu-server">moyu-后端</a></p><p><a href="https://www.yuque.com/happymoyu/as0gig/vapwmq">部署教程</a></p><p><a href="https://www.runoob.com/mongodb/mongodb-user.html">MongoDB 用户管理(菜鸟教程)</a></p><h2 id="客户端-打包-部署">客户端&amp;&amp;打包/部署</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><p>web端运行</p><blockquote><p>node：16.12.0</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm run serve </span><br></pre></td></tr></table></figure><h2 id="服务地部署">服务地部署</h2><p>MongoDB 4.x.x 以上版本</p><p>账号密码描述<br>admin111111aaa管理员<br>moyu111111aaa普通成员</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://github.com/trueleaf/moyu&quot;&gt;moyu-前端&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/trueleaf/moyu-server&quot;&gt;moyu-后端&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a hre</summary>
      
    
    
    
    <category term="开源项目" scheme="https://blog.wo0ow.com/categories/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/"/>
    
    
  </entry>
  
  <entry>
    <title>Linux下安装Jenkins服务</title>
    <link href="https://blog.wo0ow.com/mblog/35920.html"/>
    <id>https://blog.wo0ow.com/mblog/35920.html</id>
    <published>2024-12-12T10:18:27.000Z</published>
    <updated>2024-12-25T08:33:52.533Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/qq_45173404/article/details/121186410">Jenkins首次安装推荐插件出错 No such plugin: cloudbees-folder 超详细解决方案</a></p><p><a href="https://blog.csdn.net/qq_28837549/article/details/143505613">Jenkins安装与踩坑</a></p><p><a href="https://blog.csdn.net/xlgen157387/article/details/68961371">Jenkins部署Maven多环境项目（dev、beta、prod）的参数设置</a></p><p><a href="https://blog.csdn.net/baidu_36336788/article/details/122878901">Jenkins配置maven项目，打包、部署、发布</a></p><hr><p>一台Linux服务器部署Jenkins服务，简述流程：</p><p>1.安装Jdk环境</p><ul><li>配置Java多环境（可选）</li></ul><p>2.安装Maven插件</p><ul><li>配置远程Nexus仓库（可选）</li></ul><p>3.安装Git环境</p><ul><li>配置Git的密钥登录</li></ul><p>4.安装Jenkins</p><ul><li>中文插件</li><li>Git插件</li><li>Maven打包插件</li></ul><p>5.配置SSH免密登录<br>6.配置Jenkins打包的后置Shell脚本执行远程部署 (可选)</p><h2 id="Jenkins安装">Jenkins安装</h2><p><a href="https://www.jenkins.io/zh/download/">中文官网</a></p><blockquote><p>截止当前时间LTS版本：<code>2.346.3 LTS</code></p></blockquote><p><img src="/mblog/35920/Snipaste_2024-12-12_18-49-07.png" alt></p><p><a href="https://www.jenkins.io/download/">英文官网</a></p><blockquote><p>Jenkins版本高于上述<code>中文官网</code>网站，截止当前时间LTS版本：<code>2.479.2 LTS</code></p></blockquote><p><img src="/mblog/35920/Snipaste_2024-12-12_18-49-53.png" alt></p><p>安装Jenkins</p><p><img src="/mblog/35920/Snipaste_2024-12-12_19-37-28.png" alt></p><p>下载Jenkins仓库</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo</span><br></pre></td></tr></table></figure><p>导入key</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io-2023.key</span><br></pre></td></tr></table></figure><p>安装openjdk-17</p><blockquote><p>可自行安装jdk-17版本</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install fontconfig java-17-openjdk</span><br></pre></td></tr></table></figure><p>安装Jenkins</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install jenkins</span><br></pre></td></tr></table></figure><p>设置开机自启</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl enable jenkins</span><br></pre></td></tr></table></figure><p>启动/状态/重启</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl start jenkins</span><br><span class="line">systemctl stop jenkins</span><br><span class="line">systemctl status jenkins</span><br><span class="line">systemctl restart jenkins</span><br></pre></td></tr></table></figure><p>可编辑文件对<code>jenkins</code>做一些基础配置(可选)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/usr/lib/systemd/system/jenkins.service</span><br></pre></td></tr></table></figure><blockquote><p>指定启动Jenkins的JDK17路径</p></blockquote><p><img src="/mblog/35920/Snipaste_2024-12-15_16-59-58.png" alt></p><p>启动后截图</p><blockquote><p>注意：在第一次启动时的密钥到此页面前要输入安装密钥，在Jenkins的日志文件中可查或<code>systemctl status jenkins</code>会打印</p></blockquote><p><img src="/mblog/35920/Snipaste_2024-12-12_19-43-08.png" alt></p><h2 id="Jenkins配置Git凭据">Jenkins配置Git凭据</h2><h3 id="配置Linux服务器访问Git的SSH密钥">配置Linux服务器访问Git的SSH密钥</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t ed25519 -C &quot;xxxx_Jenkins&quot; -f &quot;/root/.ssh/xxx_id_rsa&quot;</span><br></pre></td></tr></table></figure><p>配置<code>config</code>文件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Host xxxx.xxx.com</span><br><span class="line">HostName xxxx.xxx.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile /root/.ssh/jenkins_id_rsa</span><br></pre></td></tr></table></figure><p>在gitlab仓库，将当前<code>id_rsa</code>公钥配置到设置</p><p><img src="/mblog/35920/Snipaste_2024-12-15_17-06-10.png" alt></p><p>验证配置</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh -T git@xxxx.xxx.com -p 22</span><br></pre></td></tr></table></figure><p><img src="/mblog/35920/Snipaste_2024-12-15_12-10-21.png" alt></p><h3 id="配置Jenkins的Git凭据认证">配置Jenkins的Git凭据认证</h3><p>配置类型<code>SSH Username with private key</code></p><blockquote><p><code>Passphrase</code>如果对公钥私钥加密，则需要配置当前口令。</p></blockquote><p><img src="/mblog/35920/Snipaste_2024-12-15_12-21-44.png" alt></p><p><a href="https://blog.csdn.net/zhzgbf/article/details/129162071">jenkins 设置Git sshkey 凭证后，报错：No ECDSA host key is known for</a></p><p><img src="/mblog/35920/Snipaste_2024-12-15_12-18-35.png" alt></p><blockquote><p>解决办法：<br>Manage jenkins --&gt; Configure Global Security ，找到 Git Host Key Verification Configuration，按下图修改后保存。警告信息可以忽略</p></blockquote><p><img src="/mblog/35920/Snipaste_2024-12-15_12-18-44.png" alt></p><h2 id="Jenkins配置Maven项目打包">Jenkins配置Maven项目打包</h2><p>选择对应项目的JDK版本<br><img src="/mblog/35920/Snipaste_2024-12-15_16-51-21.png" alt></p><p>输入项目的git仓库地址<br><img src="/mblog/35920/Snipaste_2024-12-15_16-52-11.png" alt></p><p>配置自动删除旧的构建文件<br><img src="/mblog/35920/Snipaste_2024-12-16_14-50-51.png" alt></p><p>输入项目的分支<br><img src="/mblog/35920/Snipaste_2024-12-15_16-52-57.png" alt></p><p>输入Maven构建命令</p><blockquote><p>-Pdev : 选择pom中环境为dev</p><p>-Dmaven.test.skip=true 跳过单元测试</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">clean package -Pdev -Dmaven.test.skip=true</span><br></pre></td></tr></table></figure><p><img src="/mblog/35920/Snipaste_2024-12-15_16-53-54.png" alt></p><h3 id="项目pom打包插件">项目pom打包插件</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;3.1&lt;/version&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;source&gt;1.8&lt;/source&gt;</span><br><span class="line">                    &lt;target&gt;1.8&lt;/target&gt;</span><br><span class="line">                    &lt;encoding&gt;utf-8&lt;/encoding&gt;</span><br><span class="line">                &lt;/configuration&gt;</span><br><span class="line">            &lt;/plugin&gt;</span><br><span class="line"></span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;3.2.2&lt;/version&gt;</span><br><span class="line">            &lt;/plugin&gt;</span><br></pre></td></tr></table></figure><h2 id="Jenkins打包脚本命令">Jenkins打包脚本命令</h2><p>Jenkins打包执行脚本命令：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">##注意：需要先配置与远程ssh服务器的免密登录##</span><br><span class="line"></span><br><span class="line">##项目打包目录</span><br><span class="line">DIR=&quot;/root/.jenkins/workspace/EventTrack/target/&quot; </span><br><span class="line">##项目文件</span><br><span class="line">PROJECT_NAME=&quot;EventTrack.war&quot;</span><br><span class="line">##远程部署目录</span><br><span class="line">REMOTE_DIR=&quot;/usr/local/service/tomcat8_8081/webapps/&quot;</span><br><span class="line"></span><br><span class="line">##部署远程服务器 </span><br><span class="line">##多台：(&quot;192.168.6.155&quot; &quot;192.168.6.156&quot; &quot;192.168.6.157&quot;)</span><br><span class="line">##单台：(&quot;192.168.6.155&quot;)</span><br><span class="line">server_ips=(&quot;192.168.0.69&quot;)</span><br><span class="line"></span><br><span class="line">for server_ip in $&#123;server_ips[@]&#125;</span><br><span class="line">##循环开始</span><br><span class="line">do</span><br><span class="line">        echo &quot;开始执行远程服务器$&#123;server_ip&#125;部署操作--&gt;START&quot;</span><br><span class="line">##-q 不显示传输进度条</span><br><span class="line">##-oStrictHostKeyChecking=no 参数可以在不确定或拒绝远程主机公钥的情况下，强制执行连接操作，并跳过密钥检查</span><br><span class="line">scp -q -oStrictHostKeyChecking=no $&#123;DIR&#125;$&#123;PROJECT_NAME&#125; root@$&#123;server_ip&#125;:$&#123;REMOTE_DIR&#125;/$&#123;PROJECT_NAME&#125;</span><br><span class="line">        echo &quot;执行远程服务器$&#123;server_ip&#125;部署完成--&gt;SUCCESS&quot;</span><br><span class="line">##循环结束</span><br><span class="line">done</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">##注意：需要先配置与远程ssh服务器的免密登录##</span><br><span class="line"></span><br><span class="line">##项目打包目录</span><br><span class="line">DIR=&quot;/root/.jenkins/workspace/DEV_ferryWeb/&quot;</span><br><span class="line">##项目文件</span><br><span class="line">PROJECT_NAME=&quot;web.zip&quot;</span><br><span class="line">##远程部署目录</span><br><span class="line">REMOTE_DIR=&quot;/opt/ferry_web/&quot;</span><br><span class="line">##时间戳</span><br><span class="line">TIMESTAMP=$(date &quot;+%Y%m%d%H%M%S&quot;)</span><br><span class="line"></span><br><span class="line">##部署远程服务器</span><br><span class="line">##多台：(&quot;192.168.6.155&quot; &quot;192.168.6.156&quot; &quot;192.168.6.157&quot;)</span><br><span class="line">##单台：(&quot;192.168.6.155&quot;)</span><br><span class="line">server_ips=(&quot;192.168.0.139&quot;)</span><br><span class="line"></span><br><span class="line">for server_ip in $&#123;server_ips[@]&#125;</span><br><span class="line">##循环开始</span><br><span class="line">do</span><br><span class="line">        echo &quot;开始执行远程服务器$&#123;server_ip&#125;部署操作--&gt;START&quot;</span><br><span class="line">        ##-q 不显示传输进度条</span><br><span class="line">        ##-oStrictHostKeyChecking=no 参数可以在不确定或拒绝远程主机公钥的情况下，强制执行连接操作，并跳过密钥检查</span><br><span class="line">        scp -q -oStrictHostKeyChecking=no $&#123;DIR&#125;$&#123;PROJECT_NAME&#125; root@$&#123;server_ip&#125;:$&#123;REMOTE_DIR&#125;/$&#123;PROJECT_NAME&#125;</span><br><span class="line"></span><br><span class="line">        ##执行ssh命令（多条）</span><br><span class="line">        ssh -q -oStrictHostKeyChecking=no root@$&#123;server_ip&#125; &gt; /dev/null 2&gt;&amp;1 &quot;            </span><br><span class="line">            cd $&#123;REMOTE_DIR&#125; ;             </span><br><span class="line">            mv web web_bak_$&#123;TIMESTAMP&#125;;            </span><br><span class="line">            unzip $&#123;PROJECT_NAME&#125; &gt; /dev/null ;   </span><br><span class="line">            rm -rf $&#123;PROJECT_NAME&#125;;</span><br><span class="line">        &quot;                       </span><br><span class="line"></span><br><span class="line">        echo &quot;执行远程服务器$&#123;server_ip&#125;部署完成--&gt;SUCCESS&quot;</span><br><span class="line">##循环结束</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">rm -rf $&#123;DIR&#125;web</span><br><span class="line">rm -rf $&#123;DIR&#125;$&#123;PROJECT_NAME&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Jenkins插件推荐">Jenkins插件推荐</h2><h3 id="简体中文插件">简体中文插件</h3><blockquote><p>搜索关键词<code>Localization</code></p></blockquote><p><img src="/mblog/35920/Snipaste_2024-12-12_19-50-31.png" alt></p><h3 id="Maven项目">Maven项目</h3><blockquote><p>搜索关键词<code>Maven</code></p></blockquote><p><img src="/mblog/35920/Snipaste_2024-12-12_19-56-34.png" alt></p><h3 id="Publish-Over-SSH">Publish Over SSH</h3><p><img src="/mblog/35920/Snipaste_2024-12-16_14-40-33.png" alt></p><p><a href="https://blog.csdn.net/qq_25646191/article/details/109103252">Jenkins系列教程六：Jenkins安装Publish over SSH插件并配置</a></p><h2 id="问题记录">问题记录</h2><h3 id="No-such-plugin-cloudbees-folder">No such plugin: cloudbees-folder</h3><blockquote><p>此问题记录不适当前博客文章，当前采取yum方式安装Jenkins，但仍具备一定参考作用。</p></blockquote><p><img src="/mblog/35920/Snipaste_2024-12-12_18-30-55.png" alt></p><p>缺少 <code>cloudbees-folder</code> 插件，访问 <a href="https://updates.jenkins-ci.org/download/plugins/cloudbees-folder/">cloudbees-folder</a> 下载</p><p><img src="/mblog/35920/Snipaste_2024-12-12_18-32-41.png" alt></p><p>将下载<code>cloudbees-folder.hpi</code>文件，复制到<code>Jenkins.war</code>包部署的项目目录<code>/WEB-INF/detached-plugins</code>下。</p><p><img src="/mblog/35920/Snipaste_2024-12-12_18-35-26.png" alt></p><h3 id="Maven打包报错（权限问题报错）">Maven打包报错（权限问题报错）</h3><p><a href="https://blog.csdn.net/xiezuozhen/article/details/129471359">记录在jenkins中自动部署maven项目时碰到的一些问题</a></p><p><img src="/mblog/35920/Snipaste_2024-12-15_13-19-18.png" alt></p><blockquote><p>启动的服务这里是用户<code>jenkins</code></p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@localhost conf]# ps -ef | grep jenkins</span><br><span class="line">jenkins  21755     1  2 11:18 ?        00:02:33 /usr/bin/java -Djava.awt.headless=true -jar /usr/share/java/jenkins.war --webroot=%C/jenkins/war --httpPort=8080</span><br><span class="line">root     23603 22884  0 13:14 pts/0    00:00:00 grep --color=auto jenkins</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>给Jenkins的用户授权权限</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chown -R jenkins:jenkins /opt/maven_repository</span><br><span class="line">chmod -R 755 /opt/maven_repository</span><br></pre></td></tr></table></figure><h3 id="Jenkins打包报错（JDK版本问题）">Jenkins打包报错（JDK版本问题）</h3><p><a href="https://blog.csdn.net/qq_38675373/article/details/139627182">解决linux jenkins要求JDK版本与项目版本JDK不一致问题</a></p><h3 id="Jenkins打包报错（maven-war-plugin版本问题）">Jenkins打包报错（maven-war-plugin版本问题）</h3><p><a href="https://blog.csdn.net/Cey_Tao/article/details/126550661">解决Maven打war包报错Failed to execute goal org.apache.maven.plugins:maven-war-plugin:2.2:war (default-war)</a></p><p><code>maven-war-plugin:2.2:war (default-war)</code>， 是 Maven 默认打 war 包用的插件，如果不指定版本，就默认用 2.2 版本。</p><h3 id="Jenkins打包后无法执行scp命令远程部署包">Jenkins打包后无法执行scp命令远程部署包</h3><p><a href="https://www.jianshu.com/p/02ee212832c1">jenkins执行shell脚本，使用scp免密传输失败问题</a></p><p><a href="https://blog.csdn.net/weixin_43840640/article/details/90371472">Host key verification failed：解决jenkins执行shell脚本，使用scp免密传输文件失败的问题</a></p><hr><blockquote><p>需要配置<code>jenkins</code>用户对远程linux主机免密ssh访问权限；</p></blockquote><h4 id="无法切换Jenkins用户">无法切换Jenkins用户</h4><p>切换jenkins用户</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">su jenkins</span><br></pre></td></tr></table></figure><blockquote><p>TIP：若切换后还是root账号，执行以下命令修改：</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /etc/passwd</span><br></pre></td></tr></table></figure><p>修改<code>/false</code>-&gt;<code>/bash</code></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 修改前</span><br><span class="line"># jenkins:x:997:995:Jenkins Automation Server:/var/lib/jenkins:/bin/false</span><br><span class="line"></span><br><span class="line"># 修改后</span><br><span class="line">jenkins:x:997:995:Jenkins Automation Server:/var/lib/jenkins:/bin/bash</span><br></pre></td></tr></table></figure><blockquote><p>TIP：若命令提示符的用户名不是<code>jenkins</code>而变成了 <code>bash-4.1$</code>，执行以下命令修改：</p></blockquote><p>修改环境</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim ~/.bash_profile</span><br></pre></td></tr></table></figure><p>文件最后添加</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export PS1=&#x27;[\u@\h \W]\$&#x27;</span><br></pre></td></tr></table></figure><p>使环境生效</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source ~/.bash_profile</span><br></pre></td></tr></table></figure><h4 id="Jenkins用户无法执行sudo命令">Jenkins用户无法执行sudo命令</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo visudo</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">jenkins ALL=(ALL) NOPASSWD: ALL</span><br></pre></td></tr></table></figure><p>验证切换jenkins用户</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 先切换到Jenkins用户</span><br><span class="line">su jenkins</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 执行sudo命令切换Jenkins用户</span><br><span class="line">sudo su -s /bin/bash jenkins</span><br></pre></td></tr></table></figure><h4 id="配置Jenkins用户的ssh免密登录">配置Jenkins用户的ssh免密登录</h4><p>生成Jenkins的密钥对</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure><blockquote><p>私钥：<code>/var/lib/jenkins/.ssh/id_rsa</code></p><p>公钥：<code>/var/lib/jenkins/.ssh/id_rsa.pub</code></p></blockquote><p>配置对远程服务器免密登录</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh-copy-id -i /var/lib/jenkins/.ssh/id_rsa.pub root@目标IP</span><br></pre></td></tr></table></figure><p><img src="/mblog/35920/Snipaste_2024-12-16_14-38-08.png" alt></p><h4 id="Jenkins打包远程执行脚本后Jenkins前端无法正常退出">Jenkins打包远程执行脚本后Jenkins前端无法正常退出</h4><p><a href="https://blog.csdn.net/sinat_29821865/article/details/119906879">jenkins执行.sh脚本不生效，不退出问题</a></p><p><a href="https://blog.csdn.net/wsjzzcbq/article/details/116605492">jenkins 执行 shell脚本成功但构建任务一直未结束或超时</a></p><p><code>start.sh</code>脚本命令：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">export BUILD_ID=dontKillme</span><br><span class="line"></span><br><span class="line">WORKSPACE=/usr/local/services/ferry_sheet/</span><br><span class="line">JDK_PATH=/opt/jdk/jdk1.8.0_151/bin/java</span><br><span class="line">JAR_NAME=zeus-sheet.jar</span><br><span class="line"></span><br><span class="line">PID=`ps -ef | grep $&#123;JAR_NAME&#125; | grep -v grep | grep -v startup | awk &#x27;&#123;print \$2&#125;&#x27;`</span><br><span class="line">echo $PID;</span><br><span class="line">if [ ! &quot;$PID&quot; ] ;then</span><br><span class="line">     echo &quot;进程不存在&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;进程存在，杀死进程PID$PID&quot;</span><br><span class="line">    kill -9 $PID</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo &quot;服务启动开始&quot;</span><br><span class="line">nohup $&#123;JDK_PATH&#125; -jar $&#123;WORKSPACE&#125;/$&#123;JAR_NAME&#125; --spring.profiles.active=dev 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><p>启动命令</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd /usr/local/services/ferry_sheet/</span><br><span class="line">nohup bash start.sh</span><br></pre></td></tr></table></figure><blockquote><p>注意：需开启虚拟终端 <code>Exec in pty</code></p></blockquote><p><img src="/mblog/35920/Snipaste_2024-12-25_16-32-56.png" alt></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/qq_45173404/article/details/121186410&quot;&gt;Jenkins首次安装推荐插件出错 No such plugin: cloudbees-folder 超详细解决方案&lt;/a&gt;&lt;/p&gt;
</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>MYSQL将查询结果插入/新建表</title>
    <link href="https://blog.wo0ow.com/mblog/59584.html"/>
    <id>https://blog.wo0ow.com/mblog/59584.html</id>
    <published>2024-12-09T07:19:33.000Z</published>
    <updated>2024-12-09T07:20:44.198Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/eerywh/article/details/112479600">【MySQL】将查询结果插入&#x2F;新建 进表</a></p><p>将查询结果插入已有表中</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">insert into table_name(ip,name)</span><br><span class="line">(select ip,name from sample);</span><br><span class="line"></span><br><span class="line">insert into 表名（字段名）</span><br><span class="line">（select 字段名 from 表明1 where 条件表达式）;</span><br></pre></td></tr></table></figure><p>将查询结果插入新建表中</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table test as </span><br><span class="line">select ip,name from sample;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/eerywh/article/details/112479600&quot;&gt;【MySQL】将查询结果插入&amp;#x2F;新建 进表&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;将查询结果插入已有表中&lt;/p&gt;
&lt;figure class=&quot;high</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>微信小程序获取照片中EXIF信息</title>
    <link href="https://blog.wo0ow.com/mblog/35123.html"/>
    <id>https://blog.wo0ow.com/mblog/35123.html</id>
    <published>2024-12-08T02:03:55.000Z</published>
    <updated>2024-12-08T02:17:58.716Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://developers.weixin.qq.com/community/develop/doc/00040c207383783880b79b3cb56804">获取图片exif元数据信息</a></p><hr><h2 id="准备开始"><a href="#准备开始" class="headerlink" title="准备开始"></a>准备开始</h2><p>大佬修改过的文件<code>myexif.js</code>(文末下载)</p><p>代码示例</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">// 顶部引入js文件</span><br><span class="line">import myexif from &#x27;../../utils/myexif.js&#x27;;</span><br><span class="line"></span><br><span class="line">// 调用wx小程序接口，获取上传图片信息</span><br><span class="line">wx.chooseMedia(&#123;</span><br><span class="line">     count: 1, // 最多可以选择的文件个数</span><br><span class="line">     mediaType: [&#x27;image&#x27;], // 文件类型</span><br><span class="line">     sizeType: [&#x27;original&#x27;], // 是否压缩所选文件</span><br><span class="line">     sourceType: [&#x27;album&#x27;], // 可以指定来源是相册`album`还是相机`camera`，默认二者都有</span><br><span class="line">     success(result) &#123;</span><br><span class="line"></span><br><span class="line">       const filePath = result.tempFiles[0].tempFilePath;</span><br><span class="line">       console.log(&#x27;filePath:&#x27;,filePath);</span><br><span class="line"></span><br><span class="line">       // 打印exif照片信息</span><br><span class="line">       var array = wx.getFileSystemManager().readFileSync(filePath);</span><br><span class="line">       var exif = myexif.handleBinaryFile(array);</span><br><span class="line">       console.log(&#x27;exif:&#x27;,exif);</span><br><span class="line"></span><br><span class="line">     &#125;,</span><br><span class="line">   &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="图片元信息对照"><a href="#图片元信息对照" class="headerlink" title="图片元信息对照"></a>图片元信息对照</h2><p><a href="https://www.cnblogs.com/sddai/p/17565575.html">图片元信息Exif(Exchangeable Image File)的获取和修改</a></p><p><img src="/mblog/35123/image.png" alt="alt text"></p><h2 id="附件下载"><a href="#附件下载" class="headerlink" title="附件下载"></a>附件下载</h2><ol><li><p><a href="https://pan.baidu.com/s/1Z84kyPHowXlgyg1czKyu7A?pwd=we9d">百度网盘</a></p></li><li><p>源码<code>复制</code></p><blockquote><p> 优先选择百度网盘，若百度网盘失效，则可通过<code>复制</code>文件方式</p></blockquote></li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var debug = false;</span><br><span class="line">var root = this;</span><br><span class="line">var ExifTags = &#123;</span><br><span class="line"></span><br><span class="line">    // version tags</span><br><span class="line">    0x9000 : &quot;ExifVersion&quot;,             // EXIF version</span><br><span class="line">    0xA000 : &quot;FlashpixVersion&quot;,         // Flashpix format version</span><br><span class="line"></span><br><span class="line">    // colorspace tags</span><br><span class="line">    0xA001 : &quot;ColorSpace&quot;,              // Color space information tag</span><br><span class="line"></span><br><span class="line">    // image configuration</span><br><span class="line">    0xA002 : &quot;PixelXDimension&quot;,         // Valid width of meaningful image</span><br><span class="line">    0xA003 : &quot;PixelYDimension&quot;,         // Valid height of meaningful image</span><br><span class="line">    0x9101 : &quot;ComponentsConfiguration&quot;, // Information about channels</span><br><span class="line">    0x9102 : &quot;CompressedBitsPerPixel&quot;,  // Compressed bits per pixel</span><br><span class="line"></span><br><span class="line">    // user information</span><br><span class="line">    0x927C : &quot;MakerNote&quot;,               // Any desired information written by the manufacturer</span><br><span class="line">    0x9286 : &quot;UserComment&quot;,             // Comments by user</span><br><span class="line"></span><br><span class="line">    // related file</span><br><span class="line">    0xA004 : &quot;RelatedSoundFile&quot;,        // Name of related sound file</span><br><span class="line"></span><br><span class="line">    // date and time</span><br><span class="line">    0x9003 : &quot;DateTimeOriginal&quot;,        // Date and time when the original image was generated</span><br><span class="line">    0x9004 : &quot;DateTimeDigitized&quot;,       // Date and time when the image was stored digitally</span><br><span class="line">    0x9290 : &quot;SubsecTime&quot;,              // Fractions of seconds for DateTime</span><br><span class="line">    0x9291 : &quot;SubsecTimeOriginal&quot;,      // Fractions of seconds for DateTimeOriginal</span><br><span class="line">    0x9292 : &quot;SubsecTimeDigitized&quot;,     // Fractions of seconds for DateTimeDigitized</span><br><span class="line"></span><br><span class="line">    // picture-taking conditions</span><br><span class="line">    0x829A : &quot;ExposureTime&quot;,            // Exposure time (in seconds)</span><br><span class="line">    0x829D : &quot;FNumber&quot;,                 // F number</span><br><span class="line">    0x8822 : &quot;ExposureProgram&quot;,         // Exposure program</span><br><span class="line">    0x8824 : &quot;SpectralSensitivity&quot;,     // Spectral sensitivity</span><br><span class="line">    0x8827 : &quot;ISOSpeedRatings&quot;,         // ISO speed rating</span><br><span class="line">    0x8828 : &quot;OECF&quot;,                    // Optoelectric conversion factor</span><br><span class="line">    0x9201 : &quot;ShutterSpeedValue&quot;,       // Shutter speed</span><br><span class="line">    0x9202 : &quot;ApertureValue&quot;,           // Lens aperture</span><br><span class="line">    0x9203 : &quot;BrightnessValue&quot;,         // Value of brightness</span><br><span class="line">    0x9204 : &quot;ExposureBias&quot;,            // Exposure bias</span><br><span class="line">    0x9205 : &quot;MaxApertureValue&quot;,        // Smallest F number of lens</span><br><span class="line">    0x9206 : &quot;SubjectDistance&quot;,         // Distance to subject in meters</span><br><span class="line">    0x9207 : &quot;MeteringMode&quot;,            // Metering mode</span><br><span class="line">    0x9208 : &quot;LightSource&quot;,             // Kind of light source</span><br><span class="line">    0x9209 : &quot;Flash&quot;,                   // Flash status</span><br><span class="line">    0x9214 : &quot;SubjectArea&quot;,             // Location and area of main subject</span><br><span class="line">    0x920A : &quot;FocalLength&quot;,             // Focal length of the lens in mm</span><br><span class="line">    0xA20B : &quot;FlashEnergy&quot;,             // Strobe energy in BCPS</span><br><span class="line">    0xA20C : &quot;SpatialFrequencyResponse&quot;,    //</span><br><span class="line">    0xA20E : &quot;FocalPlaneXResolution&quot;,   // Number of pixels in width direction per FocalPlaneResolutionUnit</span><br><span class="line">    0xA20F : &quot;FocalPlaneYResolution&quot;,   // Number of pixels in height direction per FocalPlaneResolutionUnit</span><br><span class="line">    0xA210 : &quot;FocalPlaneResolutionUnit&quot;,    // Unit for measuring FocalPlaneXResolution and FocalPlaneYResolution</span><br><span class="line">    0xA214 : &quot;SubjectLocation&quot;,         // Location of subject in image</span><br><span class="line">    0xA215 : &quot;ExposureIndex&quot;,           // Exposure index selected on camera</span><br><span class="line">    0xA217 : &quot;SensingMethod&quot;,           // Image sensor type</span><br><span class="line">    0xA300 : &quot;FileSource&quot;,              // Image source (3 == DSC)</span><br><span class="line">    0xA301 : &quot;SceneType&quot;,               // Scene type (1 == directly photographed)</span><br><span class="line">    0xA302 : &quot;CFAPattern&quot;,              // Color filter array geometric pattern</span><br><span class="line">    0xA401 : &quot;CustomRendered&quot;,          // Special processing</span><br><span class="line">    0xA402 : &quot;ExposureMode&quot;,            // Exposure mode</span><br><span class="line">    0xA403 : &quot;WhiteBalance&quot;,            // 1 = auto white balance, 2 = manual</span><br><span class="line">    0xA404 : &quot;DigitalZoomRation&quot;,       // Digital zoom ratio</span><br><span class="line">    0xA405 : &quot;FocalLengthIn35mmFilm&quot;,   // Equivalent foacl length assuming 35mm film camera (in mm)</span><br><span class="line">    0xA406 : &quot;SceneCaptureType&quot;,        // Type of scene</span><br><span class="line">    0xA407 : &quot;GainControl&quot;,             // Degree of overall image gain adjustment</span><br><span class="line">    0xA408 : &quot;Contrast&quot;,                // Direction of contrast processing applied by camera</span><br><span class="line">    0xA409 : &quot;Saturation&quot;,              // Direction of saturation processing applied by camera</span><br><span class="line">    0xA40A : &quot;Sharpness&quot;,               // Direction of sharpness processing applied by camera</span><br><span class="line">    0xA40B : &quot;DeviceSettingDescription&quot;,    //</span><br><span class="line">    0xA40C : &quot;SubjectDistanceRange&quot;,    // Distance to subject</span><br><span class="line"></span><br><span class="line">    // other tags</span><br><span class="line">    0xA005 : &quot;InteroperabilityIFDPointer&quot;,</span><br><span class="line">    0xA420 : &quot;ImageUniqueID&quot;            // Identifier assigned uniquely to each image</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var TiffTags = &#123;</span><br><span class="line">    0x0100 : &quot;ImageWidth&quot;,</span><br><span class="line">    0x0101 : &quot;ImageHeight&quot;,</span><br><span class="line">    0x8769 : &quot;ExifIFDPointer&quot;,</span><br><span class="line">    0x8825 : &quot;GPSInfoIFDPointer&quot;,</span><br><span class="line">    0xA005 : &quot;InteroperabilityIFDPointer&quot;,</span><br><span class="line">    0x0102 : &quot;BitsPerSample&quot;,</span><br><span class="line">    0x0103 : &quot;Compression&quot;,</span><br><span class="line">    0x0106 : &quot;PhotometricInterpretation&quot;,</span><br><span class="line">    0x0112 : &quot;Orientation&quot;,</span><br><span class="line">    0x0115 : &quot;SamplesPerPixel&quot;,</span><br><span class="line">    0x011C : &quot;PlanarConfiguration&quot;,</span><br><span class="line">    0x0212 : &quot;YCbCrSubSampling&quot;,</span><br><span class="line">    0x0213 : &quot;YCbCrPositioning&quot;,</span><br><span class="line">    0x011A : &quot;XResolution&quot;,</span><br><span class="line">    0x011B : &quot;YResolution&quot;,</span><br><span class="line">    0x0128 : &quot;ResolutionUnit&quot;,</span><br><span class="line">    0x0111 : &quot;StripOffsets&quot;,</span><br><span class="line">    0x0116 : &quot;RowsPerStrip&quot;,</span><br><span class="line">    0x0117 : &quot;StripByteCounts&quot;,</span><br><span class="line">    0x0201 : &quot;JPEGInterchangeFormat&quot;,</span><br><span class="line">    0x0202 : &quot;JPEGInterchangeFormatLength&quot;,</span><br><span class="line">    0x012D : &quot;TransferFunction&quot;,</span><br><span class="line">    0x013E : &quot;WhitePoint&quot;,</span><br><span class="line">    0x013F : &quot;PrimaryChromaticities&quot;,</span><br><span class="line">    0x0211 : &quot;YCbCrCoefficients&quot;,</span><br><span class="line">    0x0214 : &quot;ReferenceBlackWhite&quot;,</span><br><span class="line">    0x0132 : &quot;DateTime&quot;,</span><br><span class="line">    0x010E : &quot;ImageDescription&quot;,</span><br><span class="line">    0x010F : &quot;Make&quot;,</span><br><span class="line">    0x0110 : &quot;Model&quot;,</span><br><span class="line">    0x0131 : &quot;Software&quot;,</span><br><span class="line">    0x013B : &quot;Artist&quot;,</span><br><span class="line">    0x8298 : &quot;Copyright&quot;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var GPSTags = &#123;</span><br><span class="line">    0x0000 : &quot;GPSVersionID&quot;,</span><br><span class="line">    0x0001 : &quot;GPSLatitudeRef&quot;,</span><br><span class="line">    0x0002 : &quot;GPSLatitude&quot;,</span><br><span class="line">    0x0003 : &quot;GPSLongitudeRef&quot;,</span><br><span class="line">    0x0004 : &quot;GPSLongitude&quot;,</span><br><span class="line">    0x0005 : &quot;GPSAltitudeRef&quot;,</span><br><span class="line">    0x0006 : &quot;GPSAltitude&quot;,</span><br><span class="line">    0x0007 : &quot;GPSTimeStamp&quot;,</span><br><span class="line">    0x0008 : &quot;GPSSatellites&quot;,</span><br><span class="line">    0x0009 : &quot;GPSStatus&quot;,</span><br><span class="line">    0x000A : &quot;GPSMeasureMode&quot;,</span><br><span class="line">    0x000B : &quot;GPSDOP&quot;,</span><br><span class="line">    0x000C : &quot;GPSSpeedRef&quot;,</span><br><span class="line">    0x000D : &quot;GPSSpeed&quot;,</span><br><span class="line">    0x000E : &quot;GPSTrackRef&quot;,</span><br><span class="line">    0x000F : &quot;GPSTrack&quot;,</span><br><span class="line">    0x0010 : &quot;GPSImgDirectionRef&quot;,</span><br><span class="line">    0x0011 : &quot;GPSImgDirection&quot;,</span><br><span class="line">    0x0012 : &quot;GPSMapDatum&quot;,</span><br><span class="line">    0x0013 : &quot;GPSDestLatitudeRef&quot;,</span><br><span class="line">    0x0014 : &quot;GPSDestLatitude&quot;,</span><br><span class="line">    0x0015 : &quot;GPSDestLongitudeRef&quot;,</span><br><span class="line">    0x0016 : &quot;GPSDestLongitude&quot;,</span><br><span class="line">    0x0017 : &quot;GPSDestBearingRef&quot;,</span><br><span class="line">    0x0018 : &quot;GPSDestBearing&quot;,</span><br><span class="line">    0x0019 : &quot;GPSDestDistanceRef&quot;,</span><br><span class="line">    0x001A : &quot;GPSDestDistance&quot;,</span><br><span class="line">    0x001B : &quot;GPSProcessingMethod&quot;,</span><br><span class="line">    0x001C : &quot;GPSAreaInformation&quot;,</span><br><span class="line">    0x001D : &quot;GPSDateStamp&quot;,</span><br><span class="line">    0x001E : &quot;GPSDifferential&quot;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var StringValues = &#123;</span><br><span class="line">    ExposureProgram : &#123;</span><br><span class="line">        0 : &quot;Not defined&quot;,</span><br><span class="line">        1 : &quot;Manual&quot;,</span><br><span class="line">        2 : &quot;Normal program&quot;,</span><br><span class="line">        3 : &quot;Aperture priority&quot;,</span><br><span class="line">        4 : &quot;Shutter priority&quot;,</span><br><span class="line">        5 : &quot;Creative program&quot;,</span><br><span class="line">        6 : &quot;Action program&quot;,</span><br><span class="line">        7 : &quot;Portrait mode&quot;,</span><br><span class="line">        8 : &quot;Landscape mode&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    MeteringMode : &#123;</span><br><span class="line">        0 : &quot;Unknown&quot;,</span><br><span class="line">        1 : &quot;Average&quot;,</span><br><span class="line">        2 : &quot;CenterWeightedAverage&quot;,</span><br><span class="line">        3 : &quot;Spot&quot;,</span><br><span class="line">        4 : &quot;MultiSpot&quot;,</span><br><span class="line">        5 : &quot;Pattern&quot;,</span><br><span class="line">        6 : &quot;Partial&quot;,</span><br><span class="line">        255 : &quot;Other&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    LightSource : &#123;</span><br><span class="line">        0 : &quot;Unknown&quot;,</span><br><span class="line">        1 : &quot;Daylight&quot;,</span><br><span class="line">        2 : &quot;Fluorescent&quot;,</span><br><span class="line">        3 : &quot;Tungsten (incandescent light)&quot;,</span><br><span class="line">        4 : &quot;Flash&quot;,</span><br><span class="line">        9 : &quot;Fine weather&quot;,</span><br><span class="line">        10 : &quot;Cloudy weather&quot;,</span><br><span class="line">        11 : &quot;Shade&quot;,</span><br><span class="line">        12 : &quot;Daylight fluorescent (D 5700 - 7100K)&quot;,</span><br><span class="line">        13 : &quot;Day white fluorescent (N 4600 - 5400K)&quot;,</span><br><span class="line">        14 : &quot;Cool white fluorescent (W 3900 - 4500K)&quot;,</span><br><span class="line">        15 : &quot;White fluorescent (WW 3200 - 3700K)&quot;,</span><br><span class="line">        17 : &quot;Standard light A&quot;,</span><br><span class="line">        18 : &quot;Standard light B&quot;,</span><br><span class="line">        19 : &quot;Standard light C&quot;,</span><br><span class="line">        20 : &quot;D55&quot;,</span><br><span class="line">        21 : &quot;D65&quot;,</span><br><span class="line">        22 : &quot;D75&quot;,</span><br><span class="line">        23 : &quot;D50&quot;,</span><br><span class="line">        24 : &quot;ISO studio tungsten&quot;,</span><br><span class="line">        255 : &quot;Other&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    Flash : &#123;</span><br><span class="line">        0x0000 : &quot;Flash did not fire&quot;,</span><br><span class="line">        0x0001 : &quot;Flash fired&quot;,</span><br><span class="line">        0x0005 : &quot;Strobe return light not detected&quot;,</span><br><span class="line">        0x0007 : &quot;Strobe return light detected&quot;,</span><br><span class="line">        0x0009 : &quot;Flash fired, compulsory flash mode&quot;,</span><br><span class="line">        0x000D : &quot;Flash fired, compulsory flash mode, return light not detected&quot;,</span><br><span class="line">        0x000F : &quot;Flash fired, compulsory flash mode, return light detected&quot;,</span><br><span class="line">        0x0010 : &quot;Flash did not fire, compulsory flash mode&quot;,</span><br><span class="line">        0x0018 : &quot;Flash did not fire, auto mode&quot;,</span><br><span class="line">        0x0019 : &quot;Flash fired, auto mode&quot;,</span><br><span class="line">        0x001D : &quot;Flash fired, auto mode, return light not detected&quot;,</span><br><span class="line">        0x001F : &quot;Flash fired, auto mode, return light detected&quot;,</span><br><span class="line">        0x0020 : &quot;No flash function&quot;,</span><br><span class="line">        0x0041 : &quot;Flash fired, red-eye reduction mode&quot;,</span><br><span class="line">        0x0045 : &quot;Flash fired, red-eye reduction mode, return light not detected&quot;,</span><br><span class="line">        0x0047 : &quot;Flash fired, red-eye reduction mode, return light detected&quot;,</span><br><span class="line">        0x0049 : &quot;Flash fired, compulsory flash mode, red-eye reduction mode&quot;,</span><br><span class="line">        0x004D : &quot;Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected&quot;,</span><br><span class="line">        0x004F : &quot;Flash fired, compulsory flash mode, red-eye reduction mode, return light detected&quot;,</span><br><span class="line">        0x0059 : &quot;Flash fired, auto mode, red-eye reduction mode&quot;,</span><br><span class="line">        0x005D : &quot;Flash fired, auto mode, return light not detected, red-eye reduction mode&quot;,</span><br><span class="line">        0x005F : &quot;Flash fired, auto mode, return light detected, red-eye reduction mode&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    SensingMethod : &#123;</span><br><span class="line">        1 : &quot;Not defined&quot;,</span><br><span class="line">        2 : &quot;One-chip color area sensor&quot;,</span><br><span class="line">        3 : &quot;Two-chip color area sensor&quot;,</span><br><span class="line">        4 : &quot;Three-chip color area sensor&quot;,</span><br><span class="line">        5 : &quot;Color sequential area sensor&quot;,</span><br><span class="line">        7 : &quot;Trilinear sensor&quot;,</span><br><span class="line">        8 : &quot;Color sequential linear sensor&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    SceneCaptureType : &#123;</span><br><span class="line">        0 : &quot;Standard&quot;,</span><br><span class="line">        1 : &quot;Landscape&quot;,</span><br><span class="line">        2 : &quot;Portrait&quot;,</span><br><span class="line">        3 : &quot;Night scene&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    SceneType : &#123;</span><br><span class="line">        1 : &quot;Directly photographed&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    CustomRendered : &#123;</span><br><span class="line">        0 : &quot;Normal process&quot;,</span><br><span class="line">        1 : &quot;Custom process&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    WhiteBalance : &#123;</span><br><span class="line">        0 : &quot;Auto white balance&quot;,</span><br><span class="line">        1 : &quot;Manual white balance&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    GainControl : &#123;</span><br><span class="line">        0 : &quot;None&quot;,</span><br><span class="line">        1 : &quot;Low gain up&quot;,</span><br><span class="line">        2 : &quot;High gain up&quot;,</span><br><span class="line">        3 : &quot;Low gain down&quot;,</span><br><span class="line">        4 : &quot;High gain down&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    Contrast : &#123;</span><br><span class="line">        0 : &quot;Normal&quot;,</span><br><span class="line">        1 : &quot;Soft&quot;,</span><br><span class="line">        2 : &quot;Hard&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    Saturation : &#123;</span><br><span class="line">        0 : &quot;Normal&quot;,</span><br><span class="line">        1 : &quot;Low saturation&quot;,</span><br><span class="line">        2 : &quot;High saturation&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    Sharpness : &#123;</span><br><span class="line">        0 : &quot;Normal&quot;,</span><br><span class="line">        1 : &quot;Soft&quot;,</span><br><span class="line">        2 : &quot;Hard&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    SubjectDistanceRange : &#123;</span><br><span class="line">        0 : &quot;Unknown&quot;,</span><br><span class="line">        1 : &quot;Macro&quot;,</span><br><span class="line">        2 : &quot;Close view&quot;,</span><br><span class="line">        3 : &quot;Distant view&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    FileSource : &#123;</span><br><span class="line">        3 : &quot;DSC&quot;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    Components : &#123;</span><br><span class="line">        0 : &quot;&quot;,</span><br><span class="line">        1 : &quot;Y&quot;,</span><br><span class="line">        2 : &quot;Cb&quot;,</span><br><span class="line">        3 : &quot;Cr&quot;,</span><br><span class="line">        4 : &quot;R&quot;,</span><br><span class="line">        5 : &quot;G&quot;,</span><br><span class="line">        6 : &quot;B&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function base64ToArrayBuffer(base64, contentType) &#123;</span><br><span class="line">    contentType = contentType || base64.match(/^data\:([^\;]+)\;base64,/mi)[1] || &#x27;&#x27;; // e.g. &#x27;data:image/jpeg;base64,...&#x27; =&gt; &#x27;image/jpeg&#x27;</span><br><span class="line">    base64 = base64.replace(/^data\:([^\;]+)\;base64,/gmi, &#x27;&#x27;);</span><br><span class="line">    var binary = atob(base64);</span><br><span class="line">    var len = binary.length;</span><br><span class="line">    var buffer = new ArrayBuffer(len);</span><br><span class="line">    var view = new Uint8Array(buffer);</span><br><span class="line">    for (var i = 0; i &lt; len; i++) &#123;</span><br><span class="line">        view[i] = binary.charCodeAt(i);</span><br><span class="line">    &#125;</span><br><span class="line">    return buffer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function handleBinaryFile(binFile) &#123;</span><br><span class="line">    var data = findEXIFinJPEG(binFile);</span><br><span class="line">    var iptcdata = findIPTCinJPEG(binFile);</span><br><span class="line">    return &#123;</span><br><span class="line">      data: data,</span><br><span class="line">      iptcdata: iptcdata</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function findEXIFinJPEG(file) &#123;</span><br><span class="line">    var dataView = new DataView(file);</span><br><span class="line"></span><br><span class="line">    if (debug) console.log(&quot;Got file of length &quot; + file.byteLength);</span><br><span class="line">    if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) &#123;</span><br><span class="line">        if (debug) console.log(&quot;Not a valid JPEG&quot;);</span><br><span class="line">        return false; // not a valid jpeg</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var offset = 2,</span><br><span class="line">        length = file.byteLength,</span><br><span class="line">        marker;</span><br><span class="line"></span><br><span class="line">    while (offset &lt; length) &#123;</span><br><span class="line">        if (dataView.getUint8(offset) != 0xFF) &#123;</span><br><span class="line">            if (debug) console.log(&quot;Not a valid marker at offset &quot; + offset + &quot;, found: &quot; + dataView.getUint8(offset));</span><br><span class="line">            return false; // not a valid marker, something is wrong</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        marker = dataView.getUint8(offset + 1);</span><br><span class="line">        if (debug) console.log(marker);</span><br><span class="line"></span><br><span class="line">        // we could implement handling for other markers here,</span><br><span class="line">        // but we&#x27;re only looking for 0xFFE1 for EXIF data</span><br><span class="line"></span><br><span class="line">        if (marker == 225) &#123;</span><br><span class="line">            if (debug) console.log(&quot;Found 0xFFE1 marker&quot;);</span><br><span class="line"></span><br><span class="line">            return readEXIFData(dataView, offset + 4, dataView.getUint16(offset + 2) - 2);</span><br><span class="line"></span><br><span class="line">            // offset += 2 + file.getShortAt(offset+2, true);</span><br><span class="line"></span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            offset += 2 + dataView.getUint16(offset+2);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function findIPTCinJPEG(file) &#123;</span><br><span class="line">    var dataView = new DataView(file);</span><br><span class="line"></span><br><span class="line">    if (debug) console.log(&quot;Got file of length &quot; + file.byteLength);</span><br><span class="line">    if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) &#123;</span><br><span class="line">        if (debug) console.log(&quot;Not a valid JPEG&quot;);</span><br><span class="line">        return false; // not a valid jpeg</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var offset = 2,</span><br><span class="line">        length = file.byteLength;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    var isFieldSegmentStart = function(dataView, offset)&#123;</span><br><span class="line">        return (</span><br><span class="line">            dataView.getUint8(offset) === 0x38 &amp;&amp;</span><br><span class="line">            dataView.getUint8(offset+1) === 0x42 &amp;&amp;</span><br><span class="line">            dataView.getUint8(offset+2) === 0x49 &amp;&amp;</span><br><span class="line">            dataView.getUint8(offset+3) === 0x4D &amp;&amp;</span><br><span class="line">            dataView.getUint8(offset+4) === 0x04 &amp;&amp;</span><br><span class="line">            dataView.getUint8(offset+5) === 0x04</span><br><span class="line">        );</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    while (offset &lt; length) &#123;</span><br><span class="line"></span><br><span class="line">        if ( isFieldSegmentStart(dataView, offset ))&#123;</span><br><span class="line"></span><br><span class="line">            // Get the length of the name header (which is padded to an even number of bytes)</span><br><span class="line">            var nameHeaderLength = dataView.getUint8(offset+7);</span><br><span class="line">            if(nameHeaderLength % 2 !== 0) nameHeaderLength += 1;</span><br><span class="line">            // Check for pre photoshop 6 format</span><br><span class="line">            if(nameHeaderLength === 0) &#123;</span><br><span class="line">                // Always 4</span><br><span class="line">                nameHeaderLength = 4;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            var startOffset = offset + 8 + nameHeaderLength;</span><br><span class="line">            var sectionLength = dataView.getUint16(offset + 6 + nameHeaderLength);</span><br><span class="line"></span><br><span class="line">            return readIPTCData(file, startOffset, sectionLength);</span><br><span class="line"></span><br><span class="line">            break;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        // Not the marker, continue searching</span><br><span class="line">        offset++;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">var IptcFieldMap = &#123;</span><br><span class="line">    0x78 : &#x27;caption&#x27;,</span><br><span class="line">    0x6E : &#x27;credit&#x27;,</span><br><span class="line">    0x19 : &#x27;keywords&#x27;,</span><br><span class="line">    0x37 : &#x27;dateCreated&#x27;,</span><br><span class="line">    0x50 : &#x27;byline&#x27;,</span><br><span class="line">    0x55 : &#x27;bylineTitle&#x27;,</span><br><span class="line">    0x7A : &#x27;captionWriter&#x27;,</span><br><span class="line">    0x69 : &#x27;headline&#x27;,</span><br><span class="line">    0x74 : &#x27;copyright&#x27;,</span><br><span class="line">    0x0F : &#x27;category&#x27;</span><br><span class="line">&#125;;</span><br><span class="line">function readIPTCData(file, startOffset, sectionLength)&#123;</span><br><span class="line">    var dataView = new DataView(file);</span><br><span class="line">    var data = &#123;&#125;;</span><br><span class="line">    var fieldValue, fieldName, dataSize, segmentType, segmentSize;</span><br><span class="line">    var segmentStartPos = startOffset;</span><br><span class="line">    while(segmentStartPos &lt; startOffset+sectionLength) &#123;</span><br><span class="line">        if(dataView.getUint8(segmentStartPos) === 0x1C &amp;&amp; dataView.getUint8(segmentStartPos+1) === 0x02)&#123;</span><br><span class="line">            segmentType = dataView.getUint8(segmentStartPos+2);</span><br><span class="line">            if(segmentType in IptcFieldMap) &#123;</span><br><span class="line">                dataSize = dataView.getInt16(segmentStartPos+3);</span><br><span class="line">                segmentSize = dataSize + 5;</span><br><span class="line">                fieldName = IptcFieldMap[segmentType];</span><br><span class="line">                fieldValue = getStringFromDB(dataView, segmentStartPos+5, dataSize);</span><br><span class="line">                // Check if we already stored a value with this name</span><br><span class="line">                if(data.hasOwnProperty(fieldName)) &#123;</span><br><span class="line">                    // Value already stored with this name, create multivalue field</span><br><span class="line">                    if(data[fieldName] instanceof Array) &#123;</span><br><span class="line">                        data[fieldName].push(fieldValue);</span><br><span class="line">                    &#125;</span><br><span class="line">                    else &#123;</span><br><span class="line">                        data[fieldName] = [data[fieldName], fieldValue];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                else &#123;</span><br><span class="line">                    data[fieldName] = fieldValue;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        segmentStartPos++;</span><br><span class="line">    &#125;</span><br><span class="line">    return data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function readTags(file, tiffStart, dirStart, strings, bigEnd) &#123;</span><br><span class="line">    var entries = file.getUint16(dirStart, !bigEnd),</span><br><span class="line">        tags = &#123;&#125;,</span><br><span class="line">        entryOffset, tag,</span><br><span class="line">        i;</span><br><span class="line"></span><br><span class="line">    for (i=0;i&lt;entries;i++) &#123;</span><br><span class="line">        entryOffset = dirStart + i*12 + 2;</span><br><span class="line">        tag = strings[file.getUint16(entryOffset, !bigEnd)];</span><br><span class="line">        if (!tag &amp;&amp; debug) console.log(&quot;Unknown tag: &quot; + file.getUint16(entryOffset, !bigEnd));</span><br><span class="line">        tags[tag] = readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd);</span><br><span class="line">    &#125;</span><br><span class="line">    return tags;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd) &#123;</span><br><span class="line">    var type = file.getUint16(entryOffset+2, !bigEnd),</span><br><span class="line">        numValues = file.getUint32(entryOffset+4, !bigEnd),</span><br><span class="line">        valueOffset = file.getUint32(entryOffset+8, !bigEnd) + tiffStart,</span><br><span class="line">        offset,</span><br><span class="line">        vals, val, n,</span><br><span class="line">        numerator, denominator;</span><br><span class="line"></span><br><span class="line">    switch (type) &#123;</span><br><span class="line">        case 1: // byte, 8-bit unsigned int</span><br><span class="line">        case 7: // undefined, 8-bit byte, value depending on field</span><br><span class="line">            if (numValues == 1) &#123;</span><br><span class="line">                return file.getUint8(entryOffset + 8, !bigEnd);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                offset = numValues &gt; 4 ? valueOffset : (entryOffset + 8);</span><br><span class="line">                vals = [];</span><br><span class="line">                for (n=0;n&lt;numValues;n++) &#123;</span><br><span class="line">                    vals[n] = file.getUint8(offset + n);</span><br><span class="line">                &#125;</span><br><span class="line">                return vals;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        case 2: // ascii, 8-bit byte</span><br><span class="line">            offset = numValues &gt; 4 ? valueOffset : (entryOffset + 8);</span><br><span class="line">            return getStringFromDB(file, offset, numValues-1);</span><br><span class="line"></span><br><span class="line">        case 3: // short, 16 bit int</span><br><span class="line">            if (numValues == 1) &#123;</span><br><span class="line">                return file.getUint16(entryOffset + 8, !bigEnd);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                offset = numValues &gt; 2 ? valueOffset : (entryOffset + 8);</span><br><span class="line">                vals = [];</span><br><span class="line">                for (n=0;n&lt;numValues;n++) &#123;</span><br><span class="line">                    vals[n] = file.getUint16(offset + 2*n, !bigEnd);</span><br><span class="line">                &#125;</span><br><span class="line">                return vals;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        case 4: // long, 32 bit int</span><br><span class="line">            if (numValues == 1) &#123;</span><br><span class="line">                return file.getUint32(entryOffset + 8, !bigEnd);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                vals = [];</span><br><span class="line">                for (n=0;n&lt;numValues;n++) &#123;</span><br><span class="line">                    vals[n] = file.getUint32(valueOffset + 4*n, !bigEnd);</span><br><span class="line">                &#125;</span><br><span class="line">                return vals;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        case 5:    // rational = two long values, first is numerator, second is denominator</span><br><span class="line">            if (numValues == 1) &#123;</span><br><span class="line">                numerator = file.getUint32(valueOffset, !bigEnd);</span><br><span class="line">                denominator = file.getUint32(valueOffset+4, !bigEnd);</span><br><span class="line">                val = new Number(numerator / denominator);</span><br><span class="line">                val.numerator = numerator;</span><br><span class="line">                val.denominator = denominator;</span><br><span class="line">                return val;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                vals = [];</span><br><span class="line">                for (n=0;n&lt;numValues;n++) &#123;</span><br><span class="line">                    numerator = file.getUint32(valueOffset + 8*n, !bigEnd);</span><br><span class="line">                    denominator = file.getUint32(valueOffset+4 + 8*n, !bigEnd);</span><br><span class="line">                    vals[n] = new Number(numerator / denominator);</span><br><span class="line">                    vals[n].numerator = numerator;</span><br><span class="line">                    vals[n].denominator = denominator;</span><br><span class="line">                &#125;</span><br><span class="line">                return vals;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        case 9: // slong, 32 bit signed int</span><br><span class="line">            if (numValues == 1) &#123;</span><br><span class="line">                return file.getInt32(entryOffset + 8, !bigEnd);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                vals = [];</span><br><span class="line">                for (n=0;n&lt;numValues;n++) &#123;</span><br><span class="line">                    vals[n] = file.getInt32(valueOffset + 4*n, !bigEnd);</span><br><span class="line">                &#125;</span><br><span class="line">                return vals;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        case 10: // signed rational, two slongs, first is numerator, second is denominator</span><br><span class="line">            if (numValues == 1) &#123;</span><br><span class="line">                return file.getInt32(valueOffset, !bigEnd) / file.getInt32(valueOffset+4, !bigEnd);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                vals = [];</span><br><span class="line">                for (n=0;n&lt;numValues;n++) &#123;</span><br><span class="line">                    vals[n] = file.getInt32(valueOffset + 8*n, !bigEnd) / file.getInt32(valueOffset+4 + 8*n, !bigEnd);</span><br><span class="line">                &#125;</span><br><span class="line">                return vals;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getStringFromDB(buffer, start, length) &#123;</span><br><span class="line">    var outstr = &quot;&quot;;</span><br><span class="line">    for (var n = start; n &lt; start+length; n++) &#123;</span><br><span class="line">        outstr += String.fromCharCode(buffer.getUint8(n));</span><br><span class="line">    &#125;</span><br><span class="line">    return outstr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function readEXIFData(file, start) &#123;</span><br><span class="line">    if (getStringFromDB(file, start, 4) != &quot;Exif&quot;) &#123;</span><br><span class="line">        if (debug) console.log(&quot;Not valid EXIF data! &quot; + getStringFromDB(file, start, 4));</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var bigEnd,</span><br><span class="line">        tags, tag,</span><br><span class="line">        exifData, gpsData,</span><br><span class="line">        tiffOffset = start + 6;</span><br><span class="line"></span><br><span class="line">    // test for TIFF validity and endianness</span><br><span class="line">    if (file.getUint16(tiffOffset) == 0x4949) &#123;</span><br><span class="line">        bigEnd = false;</span><br><span class="line">    &#125; else if (file.getUint16(tiffOffset) == 0x4D4D) &#123;</span><br><span class="line">        bigEnd = true;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        if (debug) console.log(&quot;Not valid TIFF data! (no 0x4949 or 0x4D4D)&quot;);</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (file.getUint16(tiffOffset+2, !bigEnd) != 0x002A) &#123;</span><br><span class="line">        if (debug) console.log(&quot;Not valid TIFF data! (no 0x002A)&quot;);</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var firstIFDOffset = file.getUint32(tiffOffset+4, !bigEnd);</span><br><span class="line"></span><br><span class="line">    if (firstIFDOffset &lt; 0x00000008) &#123;</span><br><span class="line">        if (debug) console.log(&quot;Not valid TIFF data! (First offset less than 8)&quot;, file.getUint32(tiffOffset+4, !bigEnd));</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tags = readTags(file, tiffOffset, tiffOffset + firstIFDOffset, TiffTags, bigEnd);</span><br><span class="line"></span><br><span class="line">    if (tags.ExifIFDPointer) &#123;</span><br><span class="line">        exifData = readTags(file, tiffOffset, tiffOffset + tags.ExifIFDPointer, ExifTags, bigEnd);</span><br><span class="line">        for (tag in exifData) &#123;</span><br><span class="line">            switch (tag) &#123;</span><br><span class="line">                case &quot;LightSource&quot; :</span><br><span class="line">                case &quot;Flash&quot; :</span><br><span class="line">                case &quot;MeteringMode&quot; :</span><br><span class="line">                case &quot;ExposureProgram&quot; :</span><br><span class="line">                case &quot;SensingMethod&quot; :</span><br><span class="line">                case &quot;SceneCaptureType&quot; :</span><br><span class="line">                case &quot;SceneType&quot; :</span><br><span class="line">                case &quot;CustomRendered&quot; :</span><br><span class="line">                case &quot;WhiteBalance&quot; :</span><br><span class="line">                case &quot;GainControl&quot; :</span><br><span class="line">                case &quot;Contrast&quot; :</span><br><span class="line">                case &quot;Saturation&quot; :</span><br><span class="line">                case &quot;Sharpness&quot; :</span><br><span class="line">                case &quot;SubjectDistanceRange&quot; :</span><br><span class="line">                case &quot;FileSource&quot; :</span><br><span class="line">                    exifData[tag] = StringValues[tag][exifData[tag]];</span><br><span class="line">                    break;</span><br><span class="line"></span><br><span class="line">                case &quot;ExifVersion&quot; :</span><br><span class="line">                case &quot;FlashpixVersion&quot; :</span><br><span class="line">                    exifData[tag] = String.fromCharCode(exifData[tag][0], exifData[tag][1], exifData[tag][2], exifData[tag][3]);</span><br><span class="line">                    break;</span><br><span class="line"></span><br><span class="line">                case &quot;ComponentsConfiguration&quot; :</span><br><span class="line">                    exifData[tag] =</span><br><span class="line">                        StringValues.Components[exifData[tag][0]] +</span><br><span class="line">                        StringValues.Components[exifData[tag][1]] +</span><br><span class="line">                        StringValues.Components[exifData[tag][2]] +</span><br><span class="line">                        StringValues.Components[exifData[tag][3]];</span><br><span class="line">                    break;</span><br><span class="line">            &#125;</span><br><span class="line">            tags[tag] = exifData[tag];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (tags.GPSInfoIFDPointer) &#123;</span><br><span class="line">        gpsData = readTags(file, tiffOffset, tiffOffset + tags.GPSInfoIFDPointer, GPSTags, bigEnd);</span><br><span class="line">        for (tag in gpsData) &#123;</span><br><span class="line">            switch (tag) &#123;</span><br><span class="line">                case &quot;GPSVersionID&quot; :</span><br><span class="line">                    gpsData[tag] = gpsData[tag][0] +</span><br><span class="line">                        &quot;.&quot; + gpsData[tag][1] +</span><br><span class="line">                        &quot;.&quot; + gpsData[tag][2] +</span><br><span class="line">                        &quot;.&quot; + gpsData[tag][3];</span><br><span class="line">                    break;</span><br><span class="line">            &#125;</span><br><span class="line">            tags[tag] = gpsData[tag];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return tags;</span><br><span class="line">&#125;</span><br><span class="line">module.exports=&#123;</span><br><span class="line">  handleBinaryFile: handleBinaryFile</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://developers.weixin.qq.com/community/develop/doc/00040c207383783880b79b3cb56804&quot;&gt;获取图片exif元数据信息&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;准备开始&quot;&gt;</summary>
      
    
    
    
    <category term="教程集合" scheme="https://blog.wo0ow.com/categories/%E6%95%99%E7%A8%8B%E9%9B%86%E5%90%88/"/>
    
    
  </entry>
  
  <entry>
    <title>修改npm包的源码</title>
    <link href="https://blog.wo0ow.com/mblog/13174.html"/>
    <id>https://blog.wo0ow.com/mblog/13174.html</id>
    <published>2024-12-08T01:59:28.000Z</published>
    <updated>2024-12-08T02:03:32.835Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://juejin.cn/post/7200730694413910076">如何修改一个npm包的源码</a></p><p>安装依赖</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i patch-package --save</span><br></pre></td></tr></table></figure><p>修改了module中的源码</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npx patch-package &lt;your_update_module&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://juejin.cn/post/7200730694413910076&quot;&gt;如何修改一个npm包的源码&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;安装依赖&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td</summary>
      
    
    
    
    <category term="教程集合" scheme="https://blog.wo0ow.com/categories/%E6%95%99%E7%A8%8B%E9%9B%86%E5%90%88/"/>
    
    
  </entry>
  
  <entry>
    <title>Nginx解决跨域资源共享漏洞</title>
    <link href="https://blog.wo0ow.com/mblog/13279.html"/>
    <id>https://blog.wo0ow.com/mblog/13279.html</id>
    <published>2024-12-05T08:40:36.000Z</published>
    <updated>2024-12-05T08:43:44.742Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/qq_36777143/article/details/137250502">如何为Nginx配置安全的跨域资源共享（CORS）？</a></p><ul><li><code>if ($request_method = &#39;OPTIONS&#39;)</code> 用于处理预检请求（OPTIONS请求）。</li><li><code>add_header &#39;Access-Control-Allow-Origin&#39; &#39;*&#39;</code> 允许所有域访问资源。你可以将*替换为特定的域名以限制访问。</li><li><code>add_header &#39;Access-Control-Allow-Methods&#39; &#39;GET, POST, OPTIONS&#39;</code> 指定允许的HTTP方法。</li><li><code>add_header &#39;Access-Control-Allow-Headers&#39;</code> 指定允许的请求头。</li><li><code>add_header &#39;Access-Control-Expose-Headers&#39;</code> 指定哪些响应头可以暴露给前端。</li><li><code>proxy_pass http://backend_server</code> 将请求转发到后端服务器。</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name your_domain.com;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        if ($request_method = &#x27;OPTIONS&#x27;) &#123;</span><br><span class="line">            add_header &#x27;Access-Control-Allow-Origin&#x27; &#x27;*&#x27;;</span><br><span class="line">            add_header &#x27;Access-Control-Allow-Methods&#x27; &#x27;GET, POST, OPTIONS&#x27;;</span><br><span class="line">            add_header &#x27;Access-Control-Allow-Headers&#x27; &#x27;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range&#x27;;</span><br><span class="line">            add_header &#x27;Access-Control-Max-Age&#x27; 1728000;</span><br><span class="line">            add_header &#x27;Content-Type&#x27; &#x27;text/plain; charset=utf-8&#x27;;</span><br><span class="line">            add_header &#x27;Content-Length&#x27; 0;</span><br><span class="line">            return 204;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        add_header &#x27;Access-Control-Allow-Origin&#x27; &#x27;*&#x27;;</span><br><span class="line">        add_header &#x27;Access-Control-Allow-Methods&#x27; &#x27;GET, POST, OPTIONS&#x27;;</span><br><span class="line">        add_header &#x27;Access-Control-Allow-Headers&#x27; &#x27;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range&#x27;;</span><br><span class="line">        add_header &#x27;Access-Control-Expose-Headers&#x27; &#x27;Content-Length,Content-Range&#x27;;</span><br><span class="line"></span><br><span class="line">        proxy_pass http://backend_server;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/qq_36777143/article/details/137250502&quot;&gt;如何为Nginx配置安全的跨域资源共享（CORS）？&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;if ($request_meth</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>Obsidian保存附件到文件目录</title>
    <link href="https://blog.wo0ow.com/mblog/28819.html"/>
    <id>https://blog.wo0ow.com/mblog/28819.html</id>
    <published>2024-11-25T05:41:57.000Z</published>
    <updated>2024-11-25T05:47:39.375Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/dxtql/article/details/126238947">Obsidian | 保存图片到指定文件夹 | 图片保存位置</a></p><hr><p><img src="/mblog/28819/Snipaste_2024-11-25_13-43-49.png"></p><p><img src="/mblog/28819/image.png"></p><p><img src="/mblog/28819/Snipaste_2024-11-25_13-46-53.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/dxtql/article/details/126238947&quot;&gt;Obsidian | 保存图片到指定文件夹 | 图片保存位置&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;/mblog/28819/Sni</summary>
      
    
    
    
    <category term="Obsidian" scheme="https://blog.wo0ow.com/categories/Obsidian/"/>
    
    
    <category term="Obsdian" scheme="https://blog.wo0ow.com/tags/Obsdian/"/>
    
  </entry>
  
  <entry>
    <title>Uniapp相关教程</title>
    <link href="https://blog.wo0ow.com/mblog/36579.html"/>
    <id>https://blog.wo0ow.com/mblog/36579.html</id>
    <published>2024-11-23T04:47:15.000Z</published>
    <updated>2024-11-25T03:08:25.809Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/weixin_45966674/article/details/134901609">uni-app 设置当前page界面进入直接变为横屏模式</a></p><p><a href="https://blog.csdn.net/qq_34378032/article/details/122431362">uni-app中使用自定义字体</a></p><p><a href="https://blog.csdn.net/weixin_43337481/article/details/130018168">uniapp 如何去掉头部默认导航</a></p><p><a href="https://blog.csdn.net/sslcsq/article/details/127758065">uniapp中隐藏Android虚拟按键</a></p><p><a href="https://blog.csdn.net/xialong_927/article/details/122927811">UNI-APP设置屏幕保持常亮</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/weixin_45966674/article/details/134901609&quot;&gt;uni-app 设置当前page界面进入直接变为横屏模式&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.c</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>GitHub仓库升级GitPro私有发布GitHubPage</title>
    <link href="https://blog.wo0ow.com/mblog/16400.html"/>
    <id>https://blog.wo0ow.com/mblog/16400.html</id>
    <published>2024-11-13T01:12:32.000Z</published>
    <updated>2024-11-13T11:10:47.694Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.v2ex.com/t/1088970">V2EX | 开源博客的潜在信息泄露风险</a></p><h1 id="提高开源博客安全性，尽可能避免信息泄露"><a href="#提高开源博客安全性，尽可能避免信息泄露" class="headerlink" title="提高开源博客安全性，尽可能避免信息泄露"></a>提高开源博客安全性，尽可能避免信息泄露</h1><p>开通 GitHub Pro，私有仓库允许发布Github Page 页面。</p><p>md文档发布私有仓库，html页面通过ci发布到公开仓库。</p><hr><h1 id="开通GitHub-Pro"><a href="#开通GitHub-Pro" class="headerlink" title="开通GitHub Pro"></a>开通GitHub Pro</h1><h2 id="登录GitHub账户"><a href="#登录GitHub账户" class="headerlink" title="登录GitHub账户"></a>登录GitHub账户</h2><p>进入<a href="https://github.com/">GitHub</a>官方网站，用你的GitHub账号登录。</p><h2 id="进入账户设置"><a href="#进入账户设置" class="headerlink" title="进入账户设置"></a>进入账户设置</h2><p>选择「Settings」进行账户设置</p><h2 id="选择-GitHub-Pro"><a href="#选择-GitHub-Pro" class="headerlink" title="选择 GitHub Pro"></a>选择 GitHub Pro</h2><p>选择 「Billing and plan」- 「Plans and usage」</p><h2 id="选择-付费计划"><a href="#选择-付费计划" class="headerlink" title="选择 付费计划"></a>选择 付费计划</h2><blockquote><p>我这里是按月付</p></blockquote><p><img src="/mblog/16400/image.png" alt="alt text"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://www.v2ex.com/t/1088970&quot;&gt;V2EX | 开源博客的潜在信息泄露风险&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;提高开源博客安全性，尽可能避免信息泄露&quot;&gt;&lt;a href=&quot;#提高开源博客安全性，尽可能避免信息泄露&quot; class=&quot;</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>Google_Authenticator密钥导出</title>
    <link href="https://blog.wo0ow.com/mblog/27138.html"/>
    <id>https://blog.wo0ow.com/mblog/27138.html</id>
    <published>2024-11-08T05:44:28.000Z</published>
    <updated>2024-11-11T11:42:17.898Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.wyr.me/post/652">Google Authenticator 密钥导出到新iPhone</a></p><hr><p>我在<code>Google Authenticator</code>APP中记录了账户的双重验证密钥，但是有的由于之前管理不善，没有及时保存好密钥信息。导致现在自己也不清楚，账户密钥是什么。</p><p>在网上找到这个相关博客，刚好解决我当下的问题。</p><hr><p>打开<code>Google Authenticator</code>软件，左上角呼出菜单，选择<code>转移验证码</code>（不同版本APP对应提示文字不同）,然后选择需要导出的账号之后，会生成一个二维码图片（页面禁止截图）。</p><p>通过手机<code>扫一扫</code>识别二维码，并复制当前二维码内容，格式：<code>otpauth-migration://offline?data=XXXX</code></p><p>在<code>Github</code>找到<code>https://github.com/krissrex/google-authenticator-exporter</code>开源仓库，并克隆到本地环境。</p><p>安装依赖<code>npm install</code>，并启动项目<code>npm run start</code></p><p>输入复制的<code>二维码内容地址</code>，输入<code>y</code>并输入<code>filename</code>保存文件名</p><p><img src="/mblog/27138/image.png" alt="alt text"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://www.wyr.me/post/652&quot;&gt;Google Authenticator 密钥导出到新iPhone&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;我在&lt;code&gt;Google Authenticator&lt;/code&gt;APP中记录了账户的双重验证</summary>
      
    
    
    
    <category term="教程集合" scheme="https://blog.wo0ow.com/categories/%E6%95%99%E7%A8%8B%E9%9B%86%E5%90%88/"/>
    
    
  </entry>
  
  <entry>
    <title>Unity的中文乱码问题解决</title>
    <link href="https://blog.wo0ow.com/mblog/13604.html"/>
    <id>https://blog.wo0ow.com/mblog/13604.html</id>
    <published>2024-11-07T08:46:33.000Z</published>
    <updated>2024-11-11T11:27:49.144Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/NSJim/article/details/123264207">Unity中C#脚本中文乱码 - 解决方案</a></p><p><a href="https://blog.csdn.net/hgf1037882434/article/details/127137879">Unity预览或注释中文乱码解决办法</a></p><hr><p>首先需要了解的是：<code>VS</code>默认保存脚本的编码为<code>GB2312</code>，而<code>Unity</code>中默认使用<code>UTF-8</code>进行解码。</p><blockquote><p>中文乱码截图：<br><img src="/mblog/13604/image.png" alt="alt text"></p></blockquote><p>确定乱码的<code>C#</code>脚本文件，我这里是重新通过unity版本管理拉取打开项目 （注意：我没有在原来项目基础编辑，是直接重新打开一份全新的项目），然后先通过<code>vscode</code>软件打开当前项目，找到之前存在乱码的文件。</p><p>以<code>GB2312</code>编码格式重新打开<br><img src="/mblog/13604/image2.png" alt="alt text"></p><p>以<code>UTF-8</code>编码格式保存<br><img src="/mblog/13604/image3.png" alt="alt text"></p><p>最后这个文件就编码重新修正完成！</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/NSJim/article/details/123264207&quot;&gt;Unity中C#脚本中文乱码 - 解决方案&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/hgf103788</summary>
      
    
    
    
    <category term="教程集合" scheme="https://blog.wo0ow.com/categories/%E6%95%99%E7%A8%8B%E9%9B%86%E5%90%88/"/>
    
    
  </entry>
  
  <entry>
    <title>OBS录屏工具设置鼠标及键盘点击效果</title>
    <link href="https://blog.wo0ow.com/mblog/30929.html"/>
    <id>https://blog.wo0ow.com/mblog/30929.html</id>
    <published>2024-11-06T01:29:30.000Z</published>
    <updated>2024-11-11T11:27:49.143Z</updated>
    
    <content type="html"><![CDATA[<p>参考博客：<a href="https://ecwu-github-io-source.pages.dev/post/obs-studio-show-keyboard-and-mouse-activity/">使用 input-overlay 工具在 OBS Studio 中展示鼠标和按键操作</a></p><hr><p>官方页面：<br><a href="https://github.com/univrsal/input-overlay/releases">Input Overlay </a></p><hr><p>博客下使用的overlay版本及预设：</p><p><a href="./OBS%E5%BD%95%E5%B1%8F%E5%B7%A5%E5%85%B7%E8%AE%BE%E7%BD%AE%E9%BC%A0%E6%A0%87%E5%8F%8A%E9%94%AE%E7%9B%98%E7%82%B9%E5%87%BB%E6%95%88%E6%9E%9C/input-overlay-5.0.6-windows-x64-Installer.zip">input-overlay-5.0.6-windows-x64-Installer</a></p><p><a href="./OBS%E5%BD%95%E5%B1%8F%E5%B7%A5%E5%85%B7%E8%AE%BE%E7%BD%AE%E9%BC%A0%E6%A0%87%E5%8F%8A%E9%94%AE%E7%9B%98%E7%82%B9%E5%87%BB%E6%95%88%E6%9E%9C/input-overlay-5.0.0-presets.zip">input-overlay 的 preset</a></p><h2 id="win的input-overlay安装"><a href="#win的input-overlay安装" class="headerlink" title="win的input-overlay安装"></a>win的input-overlay安装</h2><p>注意：需要安装和obs安装一样的目录下。</p><blockquote><p>安装后，需要重新启动下obs软件</p></blockquote><h2 id="添加输入叠加"><a href="#添加输入叠加" class="headerlink" title="添加输入叠加"></a>添加输入叠加</h2><p>在<code>来源</code>选择<code>输入叠加</code>，按需添加鼠标及键盘或其支持外设的按键映射。</p><p>效果预览<br><img src="/mblog/30929/image.png" alt="alt text"></p><h2 id="应用预设"><a href="#应用预设" class="headerlink" title="应用预设"></a>应用预设</h2><p>鼠标：</p><ul><li>贴图文件：mouse.png</li><li>配置文件：mouse-no-movement.json</li></ul><p><img src="/mblog/30929/image_mouse.png" alt="alt text"></p><p>键盘（全）：</p><ul><li>贴图文件：qwerty.png</li><li>配置文件：qwerty.json</li></ul><p><img src="/mblog/30929/image_qwerty.png" alt="alt text"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;参考博客：&lt;a href=&quot;https://ecwu-github-io-source.pages.dev/post/obs-studio-show-keyboard-and-mouse-activity/&quot;&gt;使用 input-overlay 工具在 OBS Studio </summary>
      
    
    
    
    <category term="教程集合" scheme="https://blog.wo0ow.com/categories/%E6%95%99%E7%A8%8B%E9%9B%86%E5%90%88/"/>
    
    
  </entry>
  
  <entry>
    <title>Linux下搭建Frp实现内网穿透</title>
    <link href="https://blog.wo0ow.com/mblog/56704.html"/>
    <id>https://blog.wo0ow.com/mblog/56704.html</id>
    <published>2024-11-05T10:47:10.000Z</published>
    <updated>2024-11-06T01:24:37.042Z</updated>
    
    <content type="html"><![CDATA[<p><a href="./Linux%E4%B8%8B%E6%90%AD%E5%BB%BAFrp%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/frp_0.44.0_linux_amd64.tar.gz">frp_0.44.0_linux_amd64.tar.gz</a></p><hr><p>Frp解压后文件：</p><p><img src="/mblog/56704/Snipaste_2024-11-05_18-51-53.png"></p><ul><li>frpc 客户端</li><li>frps 服务端</li></ul><h2 id="服务端配置"><a href="#服务端配置" class="headerlink" title="服务端配置"></a>服务端配置</h2><p>编辑服务端配置文件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim frps.ini</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[common]</span><br><span class="line"># 服务端端口</span><br><span class="line">bind_port=YOUR_SERVER_PORT</span><br><span class="line"># 验证令牌</span><br><span class="line">token=YOUR_SERFVER_TOKEN</span><br></pre></td></tr></table></figure><h2 id="客户端配置"><a href="#客户端配置" class="headerlink" title="客户端配置"></a>客户端配置</h2><p>编辑客户端配置</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim frpc.ini</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[common]</span><br><span class="line">server_addr=YOUR_SERVER_ADDR</span><br><span class="line">server_port=YOUR_SERVER_PORT</span><br><span class="line">token=YOUR_SERFVER_TOKEN</span><br><span class="line"></span><br><span class="line"># 转发服务名，格式：[server_name]</span><br><span class="line">[YOUR_REDIRECT_NAME]</span><br><span class="line"># 协议：tcp 等</span><br><span class="line">type = tcp </span><br><span class="line"># 服务端代理端口</span><br><span class="line">remote_port = 8818</span><br><span class="line"># 客户端转发地址</span><br><span class="line">local_ip = 127.0.0.1</span><br><span class="line"># 客户端转发端口</span><br><span class="line">local_port = 8088</span><br></pre></td></tr></table></figure><h2 id="FRP服务端-客户端启动"><a href="#FRP服务端-客户端启动" class="headerlink" title="FRP服务端&#x2F;客户端启动"></a>FRP服务端&#x2F;客户端启动</h2><h3 id="命令启动"><a href="#命令启动" class="headerlink" title="命令启动"></a>命令启动</h3><p>当前窗口控制台方式启动（ctrl+c 退出控制台则关闭）</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./frps -c ./frps.ini</span><br></pre></td></tr></table></figure><p>后台挂起启动</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nohup ./frps -c frps.ini &amp;</span><br></pre></td></tr></table></figure><h3 id="Linux下以服务方式启动"><a href="#Linux下以服务方式启动" class="headerlink" title="Linux下以服务方式启动"></a>Linux下以服务方式启动</h3><p>例：服务端</p><p>创建服务文件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /lib/systemd/system/frps.service</span><br></pre></td></tr></table></figure><p>文件内容</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=frps service</span><br><span class="line">After=network.target syslog.target</span><br><span class="line">Wants=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">ExecStart=/root/frp/frps/frps -c /root/frp/frps/frps.ini </span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>服务命令</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl enable frps #设置开机自动启动</span><br><span class="line">systemctl disable frps #取消开机自动启动</span><br><span class="line">systemctl start frps #开启frps服务</span><br><span class="line">systemctl stop frps #关闭frps服务</span><br><span class="line">systemctl restart frps #重启frps服务</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;./Linux%E4%B8%8B%E6%90%AD%E5%BB%BAFrp%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/frp_0.44.0_linux_amd64.tar.gz&quot;&gt;frp_0</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>Linux下安装ifTop查看网络流量</title>
    <link href="https://blog.wo0ow.com/mblog/11214.html"/>
    <id>https://blog.wo0ow.com/mblog/11214.html</id>
    <published>2024-11-05T02:12:09.000Z</published>
    <updated>2024-11-06T01:24:37.040Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/weixin_43824520/article/details/110370945">CentOS 7.x下安装网络流量实时监控工具iftop、nethogs的两种方法</a></p><h2 id="iftop安装"><a href="#iftop安装" class="headerlink" title="iftop安装"></a>iftop安装</h2><h3 id="方式一"><a href="#方式一" class="headerlink" title="方式一"></a>方式一</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum -y install iftop</span><br></pre></td></tr></table></figure><blockquote><p>如下安装失败，没有可用软件包情况。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@local ~]# yum install iftop -y</span><br><span class="line">已加载插件：langpacks, product-id, search-disabled-repos, subscription-manager</span><br><span class="line"></span><br><span class="line">This system is not registered with an entitlement server. You can use subscription-manager to register.</span><br><span class="line"></span><br><span class="line">base                                                                              | 3.6 kB  00:00:00     </span><br><span class="line">centos-local                                                                      | 2.9 kB  00:00:00     </span><br><span class="line">extras                                                                            | 2.9 kB  00:00:00     </span><br><span class="line">updates                                                                           | 2.9 kB  00:00:00     </span><br><span class="line">没有可用软件包 iftop。</span><br><span class="line">错误：无须任何处理</span><br></pre></td></tr></table></figure><h3 id="方式二"><a href="#方式二" class="headerlink" title="方式二"></a>方式二</h3><p>(iftop官网)[<a href="https://pdw.ex-parrot.com/iftop/download/]">https://pdw.ex-parrot.com/iftop/download/]</a></p><p>安装iftop所需的依赖软件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install -y flex byacc libpcap ncurses-devel libpcap-devel </span><br></pre></td></tr></table></figure><p>下载</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget https://pdw.ex-parrot.com/iftop/download/iftop-1.0pre4.tar.gz</span><br></pre></td></tr></table></figure><p>创建安装目录</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir -p /usr/local/app/iftop</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd /usr/local/app/iftop</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tar -zxvf iftop-1.0pre4.tar.gz -C /usr/local/app/iftop</span><br></pre></td></tr></table></figure><p>编译</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./configure</span><br></pre></td></tr></table></figure><p>安装</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>验证</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">iftop -i ens32 -B -n </span><br></pre></td></tr></table></figure><ul><li>i ens32 是指定网卡 (ens32 是网卡名称，可以通过ifconfig命令查看得到)</li><li>B是以byte显示网速，默认是以bit显示的</li><li>n是直接显示IP而不是显示主机名。</li></ul><p>指定3306端口查看</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">iftop -i ens32 -f &quot;dst port 3306&quot;</span><br></pre></td></tr></table></figure><h2 id="安装Nethogs"><a href="#安装Nethogs" class="headerlink" title="安装Nethogs"></a>安装Nethogs</h2><p><a href="https://blog.csdn.net/carefree2005/article/details/124199604">Linux工具之nethogs命令</a></p><h3 id="yum方式安装Nethogs"><a href="#yum方式安装Nethogs" class="headerlink" title="yum方式安装Nethogs"></a>yum方式安装Nethogs</h3><p>安装<code>Epel</code>仓库 (100%开源和免费)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install epel-release -y</span><br></pre></td></tr></table></figure><p>安装Nethogs</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install libpcap nethogs -y</span><br></pre></td></tr></table></figure><p>验证</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nethogs</span><br></pre></td></tr></table></figure><p>以<code>M</code>单位显示流量</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nethogs -v 3</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/weixin_43824520/article/details/110370945&quot;&gt;CentOS 7.x下安装网络流量实时监控工具iftop、nethogs的两种方法&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;iftop</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>Vmware虚拟机固定win系统的分辨率</title>
    <link href="https://blog.wo0ow.com/mblog/29020.html"/>
    <id>https://blog.wo0ow.com/mblog/29020.html</id>
    <published>2024-10-30T13:13:04.000Z</published>
    <updated>2024-10-30T14:49:59.619Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/momentni/article/details/114782468">【环境配置】VMware Workstation（CentOS）中固定显示面板的分辨率（解决屏幕显示过小或无法固定分辨率的问题）</a></p><hr><p>我这里遇到的问题：</p><blockquote><p>调整过系统中的“显示”设置里的分辨率，调整后生效了，但下次启动时又恢复原状了。</p></blockquote><p>备注：<code>在使用VMware运行虚拟机时，其显示的界面大小特别小，周围还有很多黑色区域的空间，但是却无法利用。（对应博客中第1种情况）</code> 可能是需要安装vmtools工具</p><h2 id="将VM中win系统关机，到设置界面"><a href="#将VM中win系统关机，到设置界面" class="headerlink" title="将VM中win系统关机，到设置界面"></a>将VM中win系统关机，到设置界面</h2><p><img src="/mblog/29020/image.png"></p><h2 id="虚拟机设置-显示器"><a href="#虚拟机设置-显示器" class="headerlink" title="虚拟机设置-显示器"></a>虚拟机设置-显示器</h2><p><img src="/mblog/29020/image%20copy.png"></p><p>这里有一个我遇到的奇怪的点，我这里设置监视器分辨率<code>1920x1080</code>,然后进入虚拟机系统后，发现屏幕分辨率依然是客户机的<code>2k</code>分辨率，然后调整为<code>1920x1080</code>存在黑边，于是设置分辨率<code>1920x1200</code>后，发现界面已铺满。</p><p>在关闭虚拟机系统，重新设置监视器分辨率<code>1920x1200</code>，在进入虚拟机系统后就正常<code>1920x1200</code>分辨率显示了。 </p><p>我又关闭虚拟机系统，准备重新尝试复现<code>奇怪的点</code>的问题，但是这次设置监视器分辨率<code>1920x1080</code>，进入虚拟机系统后桌面分辨率是<code>1920x1080</code>,且无黑边。</p><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ul><li>监视器：指定监视器设置-任意监视器的最大分辨率(设置你需要的分辨率)</li><li>显示器缩放比例：拉伸模式 - 自由拉伸</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/momentni/article/details/114782468&quot;&gt;【环境配置】VMware Workstation（CentOS）中固定显示面板的分辨率（解决屏幕显示过小或无法固定分辨率的问题）&lt;/a&gt;&lt;/</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>WIN下通过NVM实现多个node版本共存和切换</title>
    <link href="https://blog.wo0ow.com/mblog/51771.html"/>
    <id>https://blog.wo0ow.com/mblog/51771.html</id>
    <published>2024-10-30T09:17:33.000Z</published>
    <updated>2025-01-17T01:25:25.198Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/m0_56308072/article/details/130894356">使用NVM实现多版本Node.js的版本共存和无缝切换</a></p><p><a href="https://blog.csdn.net/Wangquanyou/article/details/106899790">nvm安装以及踩坑记录</a></p><p><a href="https://blog.csdn.net/weixin_45719444/article/details/126432836">nvm报错： ERROR open \settings.txt: The system cannot find the file specified</a></p><hr><blockquote><p>当前博客内容：基于<code>NVM</code>版本<code>v1.1.12</code>编辑，仅供参考！</p></blockquote><h2 id="下载NVM文件">下载<code>NVM</code>文件</h2><p><a href="https://github.com/coreybutler/nvm-windows/releases">官方 github 地址发布页面</a></p><p><img src="/mblog/51771/Snipaste_2024-11-01_11-12-23.png" alt></p><h2 id="解压NVM并配置环境变量">解压<code>NVM</code>并配置环境变量</h2><blockquote><p>备注：如果当前目录中找不到，就在<code>C:\</code>根目录下找<code>PATH.txt</code>和<code>settings.txt</code>文件。</p></blockquote><p>鼠标右键<code>管理员</code>角色执行脚本命令<code>install</code>，需要在弹出的cmd窗口输入当前已解压<code>NVM</code>文件的目录。会自动创建<code>settings.txt</code>文件，且自动设置好环境变量信息。</p><p>并修改如下内容：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># root目录是：通过命令nvm install &lt;node_x&gt;版本的目录</span><br><span class="line">root: D:\Env\NVM </span><br><span class="line">path: C:\Program Files\nodejs </span><br><span class="line">arch: 64 </span><br><span class="line">proxy: none</span><br></pre></td></tr></table></figure><p><img src="/mblog/51771/Snipaste_2024-11-01_11-21-32.png" alt></p><p><img src="/mblog/51771/Snipaste_2024-11-01_11-36-48.png" alt></p><h2 id="验证NVM">验证NVM</h2><p>查看当前nvm版本信息</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nvm -v</span><br></pre></td></tr></table></figure><p><img src="/mblog/51771/Snipaste_2024-11-01_11-37-38.png" alt></p><p>查看当前可用node环境</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nvm list available</span><br></pre></td></tr></table></figure><p><img src="/mblog/51771/Snipaste_2024-11-01_11-38-44.png" alt></p><p>安装node</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nvm install 16.12.0</span><br></pre></td></tr></table></figure><p>切换</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nvm use 16.12.0</span><br></pre></td></tr></table></figure><p><img src="/mblog/51771/Snipaste_2024-11-01_11-41-46.png" alt></p><h2 id="手动下载node版本">手动下载node版本</h2><p>查询可用node版本中不存在比较老的node版本，需要通过手动下载旧的node版本进行安装。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nvm list available</span><br></pre></td></tr></table></figure><p><img src="/mblog/51771/Snipaste_2025-01-03_13-32-58.png" alt></p><hr><p><a href="https://registry.npmmirror.com/binary.html?path=node/">官方历史版本下载地址</a></p><p>示例：安装<code>node_10.9.0</code>版本</p><p>选择node版本<br><img src="/mblog/51771/Snipaste_2025-01-03_13-25-05.png" alt></p><p>选择对应设备的node版本<br><img src="/mblog/51771/image.png" alt></p><p>建议按照nvm下载的node文件夹规范命名</p><blockquote><p>例：<code>node-v10.9.0-win-x64.zip</code>，设置解压文件夹为<code>v10.9.0</code></p></blockquote><p><img src="/mblog/51771/Snipaste_2025-01-03_13-28-56.png" alt></p><p>验证安装</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nvm list</span><br></pre></td></tr></table></figure><p><img src="/mblog/51771/Snipaste_2025-01-03_13-31-28.png" alt></p><h2 id="更改安装包源">更改安装包源</h2><p>查看当前源</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm config get registry</span><br></pre></td></tr></table></figure><p>设置源</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm config set registry http://registry.npm.taobao.org/</span><br></pre></td></tr></table></figure><p>恢复默认源</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm config set registry=https://registry.npmjs.org </span><br></pre></td></tr></table></figure><hr><p>临时设置源进行安装依赖</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm --registry https://registry.npmmirror.com install</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/m0_56308072/article/details/130894356&quot;&gt;使用NVM实现多版本Node.js的版本共存和无缝切换&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.n</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>去除Alter弹窗的域名显示</title>
    <link href="https://blog.wo0ow.com/mblog/16631.html"/>
    <id>https://blog.wo0ow.com/mblog/16631.html</id>
    <published>2024-10-28T06:26:42.000Z</published>
    <updated>2024-10-30T09:18:25.524Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/weixin_43834512/article/details/104834422">去除alert弹窗域名</a></p><p>注意：适用于移动端，PC端不适用</p><blockquote><p>vue项目中，将当前代码补充在<code>main.js</code>中</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(function()&#123;</span><br><span class="line">        window.alert = function(name)&#123;</span><br><span class="line">            var iframe = document.createElement(&quot;IFRAME&quot;);</span><br><span class="line">            iframe.style.display=&quot;none&quot;;</span><br><span class="line">            iframe.setAttribute(&quot;src&quot;, &#x27;data:text/plain&#x27;);</span><br><span class="line">            document.documentElement.appendChild(iframe);</span><br><span class="line">            window.frames[0].window.alert(name);</span><br><span class="line">            iframe.parentNode.removeChild(iframe);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)();</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/weixin_43834512/article/details/104834422&quot;&gt;去除alert弹窗域名&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;注意：适用于移动端，PC端不适用&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;vue</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>Springboot的jar部署通过nginx代理</title>
    <link href="https://blog.wo0ow.com/mblog/19035.html"/>
    <id>https://blog.wo0ow.com/mblog/19035.html</id>
    <published>2024-10-25T03:33:07.000Z</published>
    <updated>2024-10-25T03:51:23.881Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/qq_40561800/article/details/116308064">Spring boot 打包时含有外部引用的jar包，打包没有打入lib中解决方法</a></p><h1 id="SpringBoot引入外部jar包，并打包jar进行部署"><a href="#SpringBoot引入外部jar包，并打包jar进行部署" class="headerlink" title="SpringBoot引入外部jar包，并打包jar进行部署"></a>SpringBoot引入外部jar包，并打包jar进行部署</h1><p>Maven的pom文件引入如下依赖（示例）：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.xx.xx&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;xx&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;xx&lt;/version&gt;</span><br><span class="line">&lt;scope&gt;system&lt;/scope&gt;</span><br><span class="line">&lt;systemPath&gt;$&#123;project.basedir&#125;/src/main/resources/lib/xx.jar&lt;/</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>resource添加如下配置：</p><blockquote><p>WAR包部署</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> &lt;!--第三方jar包打包到WEB-INF目录下--&gt;</span><br><span class="line">&lt;resource&gt;</span><br><span class="line">    &lt;directory&gt;$&#123;project.basedir&#125;/src/main/resources/lib&lt;/directory&gt;</span><br><span class="line">    &lt;targetPath&gt;$&#123;project.build.directory&#125;/$&#123;project.build.finalName&#125;/WEB-INF/lib/&lt;/targetPath&gt;</span><br><span class="line">    &lt;includes&gt;</span><br><span class="line">        &lt;include&gt;**/*.jar&lt;/include&gt;</span><br><span class="line">    &lt;/includes&gt;</span><br><span class="line">&lt;/resource&gt;</span><br></pre></td></tr></table></figure><blockquote><p>JAR包部署</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!--第三方jar包打包到BOOT-INF/lib/目录下--&gt;</span><br><span class="line">&lt;resource&gt;</span><br><span class="line">    &lt;directory&gt;$&#123;project.basedir&#125;/src/main/resources/lib&lt;/directory&gt;</span><br><span class="line">    &lt;targetPath&gt;BOOT-INF/lib/&lt;/targetPath&gt;</span><br><span class="line">    &lt;includes&gt;</span><br><span class="line">        &lt;include&gt;**/*.jar&lt;/include&gt;</span><br><span class="line">    &lt;/includes&gt;</span><br><span class="line">&lt;/resource&gt;</span><br></pre></td></tr></table></figure><h1 id="Nginx代理SpringBoot服务"><a href="#Nginx代理SpringBoot服务" class="headerlink" title="Nginx代理SpringBoot服务"></a>Nginx代理SpringBoot服务</h1><blockquote><p>WAR包部署</p></blockquote><p>通常方式，不多补充。</p><blockquote><p>JAR包部署</p></blockquote><p>applicatoin.yml片段</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: 8012</span><br><span class="line">  servlet:</span><br><span class="line">    context-path: /</span><br></pre></td></tr></table></figure><p>nginx下配置片段</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">upstream XXX &#123;</span><br><span class="line">        server  192.168.0.129:8012 weight=5 max_fails=3 fail_timeout=15s; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">location /项目名/ &#123;</span><br><span class="line">           index  index.jsp;</span><br><span class="line">           proxy_pass http://XXX/;</span><br><span class="line">           proxy_set_header       Host $host;</span><br><span class="line">           proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">           proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">           proxy_set_header X-Forwarded-Proto  $scheme;</span><br><span class="line">           client_body_buffer_size 128k;</span><br><span class="line">           proxy_connect_timeout 120;</span><br><span class="line">           proxy_send_timeout 200;</span><br><span class="line">           proxy_read_timeout 200;</span><br><span class="line">           proxy_buffer_size 4k;</span><br><span class="line">           proxy_buffers 4 32k;</span><br><span class="line">           proxy_busy_buffers_size 64k;</span><br><span class="line">           proxy_temp_file_write_size 64k;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>由于springboot的<code>context-path: /</code>,这里nginx访问的时候需要<code>proxy_pass http://XXX/</code>,注意：末端<code>/</code>需要携带。</p><ul><li><code>http://XXX/</code>：访问请求带<code>项目名</code></li><li><code>http://XXX</code>：访问请求直接从根路径<code>/</code>开始</li></ul><hr><p>其他用例：</p><p>springboot</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: 8012</span><br><span class="line">  servlet:</span><br><span class="line">    context-path: /test</span><br></pre></td></tr></table></figure><p>nginx</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">location /项目名/ &#123;</span><br><span class="line">           index  index.jsp;</span><br><span class="line">           proxy_pass http://XXX/test/;</span><br><span class="line">           proxy_set_header       Host $host;</span><br><span class="line">           proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">           proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">           proxy_set_header X-Forwarded-Proto  $scheme;</span><br><span class="line">           client_body_buffer_size 128k;</span><br><span class="line">           proxy_connect_timeout 120;</span><br><span class="line">           proxy_send_timeout 200;</span><br><span class="line">           proxy_read_timeout 200;</span><br><span class="line">           proxy_buffer_size 4k;</span><br><span class="line">           proxy_buffers 4 32k;</span><br><span class="line">           proxy_busy_buffers_size 64k;</span><br><span class="line">           proxy_temp_file_write_size 64k;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/qq_40561800/article/details/116308064&quot;&gt;Spring boot 打包时含有外部引用的jar包，打包没有打入lib中解决方法&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;SpringBoo</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>springBoot集成MybatisPlus3.0</title>
    <link href="https://blog.wo0ow.com/mblog/57527.html"/>
    <id>https://blog.wo0ow.com/mblog/57527.html</id>
    <published>2024-10-23T02:20:04.000Z</published>
    <updated>2024-10-25T03:51:23.882Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/Aqting/article/details/123622714">【实用工具】利用MyBatisX插件自动生成代码</a></p><p><a href="https://blog.csdn.net/tantangyueyue/article/details/119714339">SpringBoot整合MyBatis-plus（超详细）</a></p><p><a href="https://blog.csdn.net/ZL_2014/article/details/117168147">java.lang.NoClassDefFoundError: org&#x2F;mybatis&#x2F;logging&#x2F;LoggerFactory</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/Aqting/article/details/123622714&quot;&gt;【实用工具】利用MyBatisX插件自动生成代码&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/tanta</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>Sm国密实现数字信封加密方式</title>
    <link href="https://blog.wo0ow.com/mblog/55103.html"/>
    <id>https://blog.wo0ow.com/mblog/55103.html</id>
    <published>2024-10-22T10:59:30.000Z</published>
    <updated>2024-10-22T11:10:32.413Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://blog.csdn.net/helloworders/article/details/140467817">基于国密（SM2，SM3，SM4）的数字信封加密加签实现</a></p></blockquote><hr><p>数字信封加密业务流程</p><p><img src="/mblog/55103/Snipaste_2024-10-22_19-00-43.png"></p><p>SM2</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">import org.bouncycastle.asn1.gm.GMNamedCurves;</span><br><span class="line">import org.bouncycastle.asn1.x9.X9ECParameters;</span><br><span class="line">import org.bouncycastle.crypto.CipherParameters;</span><br><span class="line">import org.bouncycastle.crypto.engines.SM2Engine;</span><br><span class="line">import org.bouncycastle.crypto.params.ECDomainParameters;</span><br><span class="line">import org.bouncycastle.crypto.params.ECPrivateKeyParameters;</span><br><span class="line">import org.bouncycastle.crypto.params.ECPublicKeyParameters;</span><br><span class="line">import org.bouncycastle.crypto.params.ParametersWithRandom;</span><br><span class="line">import org.bouncycastle.crypto.signers.SM2Signer;</span><br><span class="line">import org.bouncycastle.jcajce.provider.asymmetric.ec.BCECPrivateKey;</span><br><span class="line">import org.bouncycastle.jcajce.provider.asymmetric.ec.BCECPublicKey;</span><br><span class="line">import org.bouncycastle.jce.provider.BouncyCastleProvider;</span><br><span class="line">import org.bouncycastle.jce.spec.ECParameterSpec;</span><br><span class="line">import org.bouncycastle.jce.spec.ECPrivateKeySpec;</span><br><span class="line">import org.bouncycastle.math.ec.ECPoint;</span><br><span class="line">import org.bouncycastle.util.encoders.Hex;</span><br><span class="line"></span><br><span class="line">import java.math.BigInteger;</span><br><span class="line">import java.nio.charset.StandardCharsets;</span><br><span class="line">import java.security.*;</span><br><span class="line">import java.security.spec.ECGenParameterSpec;</span><br><span class="line">import java.util.Base64;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">public class SM2Utils &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 生成 SM2 公私钥对</span><br><span class="line">     *</span><br><span class="line">     * @return</span><br><span class="line">     * @throws NoSuchAlgorithmException</span><br><span class="line">     * @throws InvalidAlgorithmParameterException</span><br><span class="line">     */</span><br><span class="line">    public static KeyPair geneSM2KeyPair() throws NoSuchAlgorithmException, InvalidAlgorithmParameterException &#123;</span><br><span class="line">        final ECGenParameterSpec sm2Spec = new ECGenParameterSpec(&quot;sm2p256v1&quot;);</span><br><span class="line">        // 获取一个椭圆曲线类型的密钥对生成器</span><br><span class="line">        final KeyPairGenerator kpg = KeyPairGenerator.getInstance(&quot;EC&quot;, new BouncyCastleProvider());</span><br><span class="line">        // 产生随机数</span><br><span class="line">        SecureRandom secureRandom = new SecureRandom();</span><br><span class="line">        // 使用SM2参数初始化生成器</span><br><span class="line">        kpg.initialize(sm2Spec, secureRandom);</span><br><span class="line">        // 获取密钥对</span><br><span class="line">        KeyPair keyPair = kpg.generateKeyPair();</span><br><span class="line">        return keyPair;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 生产hex秘钥对</span><br><span class="line">     */</span><br><span class="line">    public static void geneSM2HexKeyPair()&#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            KeyPair keyPair = geneSM2KeyPair();</span><br><span class="line">            PrivateKey privateKey = keyPair.getPrivate();</span><br><span class="line">            PublicKey publicKey = keyPair.getPublic();</span><br><span class="line">            System.out.println(&quot;========  EC X Y keyPair    ========&quot;);</span><br><span class="line">            System.out.println(privateKey.toString());</span><br><span class="line">            System.out.println(publicKey.toString());</span><br><span class="line">            System.out.println(&quot;========  hex keyPair       ========&quot;);</span><br><span class="line">            System.out.println(&quot;hex priKey: &quot; + getPriKeyHexString(privateKey));</span><br><span class="line">            System.out.println(&quot;hex pubKey: &quot; + getPubKeyHexString(publicKey));</span><br><span class="line">            System.out.println(&quot;========  base64 keyPair    ========&quot;);</span><br><span class="line">            System.out.println(&quot;base64 priKey: &quot; + new String(Base64.getEncoder().encode(privateKey.getEncoded())));</span><br><span class="line">            System.out.println(&quot;base64 pubKey: &quot; + new String(Base64.getEncoder().encode(publicKey.getEncoded())));</span><br><span class="line">            System.out.println(&quot;========  generate finished ========&quot;);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     * 获取私钥（16进制字符串，头部不带00长度共64）</span><br><span class="line">     *</span><br><span class="line">     * @param privateKey 私钥PrivateKey型</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static String getPriKeyHexString(PrivateKey privateKey) &#123;</span><br><span class="line">        // OK</span><br><span class="line">//        BCECPrivateKey s=(BCECPrivateKey)privateKey;</span><br><span class="line">//        String priKeyHexString = Hex.toHexString(s.getD().toByteArray());</span><br><span class="line">//        if(null!= priKeyHexString &amp;&amp; priKeyHexString.length()==66 &amp;&amp; &quot;00&quot;.equals(priKeyHexString.substring(0,2)))&#123;</span><br><span class="line">//            return priKeyHexString.substring(2);</span><br><span class="line">//        &#125;</span><br><span class="line">        // OK</span><br><span class="line">        BCECPrivateKey key = (BCECPrivateKey) privateKey;</span><br><span class="line">        BigInteger intPrivateKey = key.getD();</span><br><span class="line">        String priKeyHexString = intPrivateKey.toString(16);</span><br><span class="line">        return priKeyHexString;</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     * 获取私钥 base64字符串</span><br><span class="line">     *</span><br><span class="line">     * @param privateKey 私钥PrivateKey型</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static String getPriKeyBase64String(PrivateKey privateKey) &#123;</span><br><span class="line">        return new String(Base64.getEncoder().encode(privateKey.getEncoded()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 获取公钥（16进制字符串，头部带04长度共130）</span><br><span class="line">     *</span><br><span class="line">     * @param publicKey 公钥PublicKey型</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static String getPubKeyHexString(PublicKey publicKey) &#123;</span><br><span class="line">        BCECPublicKey key = (BCECPublicKey) publicKey;</span><br><span class="line">        return Hex.toHexString(key.getQ().getEncoded(false));</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     * 获取公钥 base64字符串</span><br><span class="line">     *</span><br><span class="line">     * @param publicKey 公钥PublicKey型</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static String getPubKeyBase64String(PublicKey publicKey) &#123;</span><br><span class="line">        return new String(Base64.getEncoder().encode(publicKey.getEncoded()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * SM2加密算法</span><br><span class="line">     *</span><br><span class="line">     * @param publicKey 公钥</span><br><span class="line">     * @param data      明文数据</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static String encrypt(String data, PublicKey publicKey) &#123;</span><br><span class="line">        return encrypt(data.getBytes(StandardCharsets.UTF_8), publicKey);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @param data</span><br><span class="line">     * @param publicKey</span><br><span class="line">     * @return</span><br><span class="line">     * @author</span><br><span class="line">     * @version 1.0</span><br><span class="line">     * 2023年4月12日下午4:41:24</span><br><span class="line">     */</span><br><span class="line">    public static String encrypt(byte[] data, PublicKey publicKey) &#123;</span><br><span class="line">        BCECPublicKey key = (BCECPublicKey) publicKey;</span><br><span class="line">        return encrypt(data, Hex.toHexString(key.getQ().getEncoded(false)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @param data</span><br><span class="line">     * @param pubKeyHexString</span><br><span class="line">     * @return</span><br><span class="line">     * @author</span><br><span class="line">     * @version 1.0</span><br><span class="line">     * 2023年4月12日下午4:46:37</span><br><span class="line">     */</span><br><span class="line">    public static String encrypt(String data, String pubKeyHexString) &#123;</span><br><span class="line">        return encrypt(data.getBytes(StandardCharsets.UTF_8), pubKeyHexString);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * SM2加密算法</span><br><span class="line">     *</span><br><span class="line">     * @param pubKeyHexString 公钥（16进制字符串）</span><br><span class="line">     * @param data            明文数据</span><br><span class="line">     * @return hex字符串</span><br><span class="line">     */</span><br><span class="line">    public static String encrypt(byte[] data, String pubKeyHexString) &#123;</span><br><span class="line">        // 获取一条SM2曲线参数</span><br><span class="line">        X9ECParameters sm2ECParameters = GMNamedCurves.getByName(&quot;sm2p256v1&quot;);</span><br><span class="line">        // 构造ECC算法参数，曲线方程、椭圆曲线G点、大整数N</span><br><span class="line">        ECDomainParameters domainParameters = new ECDomainParameters(sm2ECParameters.getCurve(), sm2ECParameters.getG(), sm2ECParameters.getN());</span><br><span class="line">        //提取公钥点</span><br><span class="line">        ECPoint pukPoint = sm2ECParameters.getCurve().decodePoint(Hex.decode(pubKeyHexString));</span><br><span class="line">        // 公钥前面的02或者03表示是压缩公钥，04表示未压缩公钥, 04的时候，可以去掉前面的04</span><br><span class="line">        ECPublicKeyParameters publicKeyParameters = new ECPublicKeyParameters(pukPoint, domainParameters);</span><br><span class="line"></span><br><span class="line">        SM2Engine sm2Engine = new SM2Engine(SM2Engine.Mode.C1C3C2);</span><br><span class="line">        // 设置sm2为加密模式</span><br><span class="line">        sm2Engine.init(true, new ParametersWithRandom(publicKeyParameters, new SecureRandom()));</span><br><span class="line"></span><br><span class="line">        byte[] arrayOfBytes = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            arrayOfBytes = sm2Engine.processBlock(data, 0, data.length);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            System.out.println(&quot;SM2加密时出现异常:&quot; + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        String cipherData = Hex.toHexString(arrayOfBytes);</span><br><span class="line">        return cipherData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static String encrypt2(String dataStr, String pubKeyHexString) &#123;</span><br><span class="line">        byte[] data = dataStr.getBytes(StandardCharsets.UTF_8);</span><br><span class="line">        // 获取一条SM2曲线参数</span><br><span class="line">        X9ECParameters sm2ECParameters = GMNamedCurves.getByName(&quot;sm2p256v1&quot;);</span><br><span class="line">        // 构造ECC算法参数，曲线方程、椭圆曲线G点、大整数N</span><br><span class="line">        ECDomainParameters domainParameters = new ECDomainParameters(sm2ECParameters.getCurve(), sm2ECParameters.getG(), sm2ECParameters.getN());</span><br><span class="line">        //提取公钥点</span><br><span class="line">        ECPoint pukPoint = sm2ECParameters.getCurve().decodePoint(Hex.decode(pubKeyHexString));</span><br><span class="line">        // 公钥前面的02或者03表示是压缩公钥，04表示未压缩公钥, 04的时候，可以去掉前面的04</span><br><span class="line">        ECPublicKeyParameters publicKeyParameters = new ECPublicKeyParameters(pukPoint, domainParameters);</span><br><span class="line"></span><br><span class="line">        SM2Engine sm2Engine = new SM2Engine(SM2Engine.Mode.C1C3C2);</span><br><span class="line">        // 设置sm2为加密模式</span><br><span class="line">        sm2Engine.init(true, new ParametersWithRandom(publicKeyParameters, new SecureRandom()));</span><br><span class="line"></span><br><span class="line">        byte[] arrayOfBytes = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            arrayOfBytes = sm2Engine.processBlock(data, 0, data.length);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            System.out.println(&quot;SM2加密时出现异常:&quot; + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        String cipherData = Hex.toHexString(arrayOfBytes);</span><br><span class="line">        if (cipherData.startsWith(&quot;04&quot;)) &#123;</span><br><span class="line">            cipherData = cipherData.substring(2);</span><br><span class="line">        &#125;</span><br><span class="line">        return cipherData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * SM2解密算法</span><br><span class="line">     * @param cipherData    hex格式密文</span><br><span class="line">     * @param privateKey    密钥PrivateKey型</span><br><span class="line">     * @return              明文</span><br><span class="line">     */</span><br><span class="line">    public static String decrypt(String cipherData, PrivateKey privateKey) &#123;</span><br><span class="line">        return decrypt(Hex.decode(cipherData), privateKey);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @param cipherData</span><br><span class="line">     * @param privateKey</span><br><span class="line">     * @return</span><br><span class="line">     * @author</span><br><span class="line">     * @version 1.0</span><br><span class="line">     * 2023年4月12日下午4:46:50</span><br><span class="line">     */</span><br><span class="line">    public static String decrypt(byte[] cipherData, PrivateKey privateKey) &#123;</span><br><span class="line">        BCECPrivateKey key = (BCECPrivateKey) privateKey;</span><br><span class="line">        return decrypt(cipherData, Hex.toHexString(key.getD().toByteArray()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @param cipherData</span><br><span class="line">     * @param priKeyHexString</span><br><span class="line">     * @return</span><br><span class="line">     * @author</span><br><span class="line">     * @version 1.0</span><br><span class="line">     * 2023年4月12日下午4:46:53</span><br><span class="line">     */</span><br><span class="line">    public static String decrypt(String cipherData, String priKeyHexString) &#123;</span><br><span class="line">        // 使用BC库加解密时密文以04开头，传入的密文前面没有04则补上</span><br><span class="line">       // if (!cipherData.startsWith(&quot;04&quot;)) &#123;</span><br><span class="line">       //     cipherData = &quot;04&quot; + cipherData;</span><br><span class="line">       // &#125;</span><br><span class="line">        // cipherData = &quot;04&quot; + cipherData;</span><br><span class="line">        return decrypt(Hex.decode(cipherData), priKeyHexString);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * SM2解密算法</span><br><span class="line">     *</span><br><span class="line">     * @param cipherData      密文数据</span><br><span class="line">     * @param priKeyHexString 私钥（16进制字符串）</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static String decrypt(byte[] cipherData, String priKeyHexString) &#123;</span><br><span class="line">        //获取一条SM2曲线参数</span><br><span class="line">        X9ECParameters sm2ECParameters = GMNamedCurves.getByName(&quot;sm2p256v1&quot;);</span><br><span class="line">        //构造domain参数</span><br><span class="line">        ECDomainParameters domainParameters = new ECDomainParameters(sm2ECParameters.getCurve(), sm2ECParameters.getG(), sm2ECParameters.getN());</span><br><span class="line"></span><br><span class="line">        BigInteger privateKeyD = new BigInteger(priKeyHexString, 16);</span><br><span class="line">        ECPrivateKeyParameters privateKeyParameters = new ECPrivateKeyParameters(privateKeyD, domainParameters);</span><br><span class="line"></span><br><span class="line">        SM2Engine sm2Engine = new SM2Engine(SM2Engine.Mode.C1C3C2);</span><br><span class="line">        // 设置sm2为解密模式</span><br><span class="line">        sm2Engine.init(false, privateKeyParameters);</span><br><span class="line"></span><br><span class="line">        String result = &quot;&quot;;</span><br><span class="line">        try &#123;</span><br><span class="line">            byte[] arrayOfBytes = sm2Engine.processBlock(cipherData, 0, cipherData.length);</span><br><span class="line">            return new String(arrayOfBytes);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            System.out.println(&quot;SM2解密时出现异常:&quot; + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * SM2解密算法 - 解密前端传的密文</span><br><span class="line">     * @param decryptData      密文数据</span><br><span class="line">     * @param priKeyHexString 私钥（16进制字符串）</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static String decrypt2(String decryptData, String priKeyHexString) &#123;</span><br><span class="line">        // 使用BC库加解密时密文以04开头，传入的密文前面没有04则补上</span><br><span class="line">        if (!decryptData.startsWith(&quot;04&quot;)) &#123;</span><br><span class="line">            decryptData = &quot;04&quot; + decryptData;</span><br><span class="line">        &#125;</span><br><span class="line">        byte[] cipherData = Hex.decode(decryptData);</span><br><span class="line">        //获取一条SM2曲线参数</span><br><span class="line">        X9ECParameters sm2ECParameters = GMNamedCurves.getByName(&quot;sm2p256v1&quot;);</span><br><span class="line">        //构造domain参数</span><br><span class="line">        ECDomainParameters domainParameters = new ECDomainParameters(sm2ECParameters.getCurve(), sm2ECParameters.getG(), sm2ECParameters.getN());</span><br><span class="line"></span><br><span class="line">        BigInteger privateKeyD = new BigInteger(priKeyHexString, 16);</span><br><span class="line">        ECPrivateKeyParameters privateKeyParameters = new ECPrivateKeyParameters(privateKeyD, domainParameters);</span><br><span class="line"></span><br><span class="line">        SM2Engine sm2Engine = new SM2Engine(SM2Engine.Mode.C1C3C2);</span><br><span class="line">        // 设置sm2为解密模式</span><br><span class="line">        sm2Engine.init(false, privateKeyParameters);</span><br><span class="line"></span><br><span class="line">        String result = &quot;&quot;;</span><br><span class="line">        try &#123;</span><br><span class="line">            byte[] arrayOfBytes = sm2Engine.processBlock(cipherData, 0, cipherData.length);</span><br><span class="line">            //processBlock得到Base64格式，记得解码，不然前端传过来的密文无法解密</span><br><span class="line">            arrayOfBytes = Base64.getDecoder().decode(arrayOfBytes);</span><br><span class="line">            return new String(arrayOfBytes);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            System.out.println(&quot;SM2解密时出现异常:&quot; + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @param data</span><br><span class="line">     * @param priKeyHexString hex私钥，长度64</span><br><span class="line">     * @return hex格式签名值</span><br><span class="line">     * @throws Exception</span><br><span class="line">     */</span><br><span class="line">    public static String sign(String data, String priKeyHexString) throws Exception &#123;</span><br><span class="line">        return sign(data.getBytes(StandardCharsets.UTF_8), priKeyHexString);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 签名</span><br><span class="line">     * @param data              原始数据，字节数组</span><br><span class="line">     * @param priKeyHexString   hex私钥，64长度</span><br><span class="line">     * @return                  Hex字符串</span><br><span class="line">     * @throws Exception</span><br><span class="line">     */</span><br><span class="line">    public static String sign(byte[] data, String priKeyHexString) throws Exception &#123;</span><br><span class="line">        String signValue = null;</span><br><span class="line">        SM2Signer signer = new SM2Signer();</span><br><span class="line">        X9ECParameters sm2ECParameters = GMNamedCurves.getByName(&quot;sm2p256v1&quot;);</span><br><span class="line">        //构造domain参数</span><br><span class="line">        ECDomainParameters domainParameters = new ECDomainParameters(sm2ECParameters.getCurve(), sm2ECParameters.getG(), sm2ECParameters.getN());</span><br><span class="line">        CipherParameters param = new ParametersWithRandom(new ECPrivateKeyParameters(new BigInteger(priKeyHexString, 16), domainParameters));</span><br><span class="line">        signer.init(true, param);</span><br><span class="line">        signer.update(data, 0, data.length);</span><br><span class="line">        signValue = Hex.toHexString(signer.generateSignature());</span><br><span class="line">        return signValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 验签</span><br><span class="line">     * @param data                  数据</span><br><span class="line">     * @param signValue             签名值(hex型)</span><br><span class="line">     * @param publicKeyHexString    hex130长度公钥</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static boolean verify(String data, String signValue, String publicKeyHexString) throws Exception &#123;</span><br><span class="line">        return verify(data.getBytes(StandardCharsets.UTF_8), Hex.decode(signValue), publicKeyHexString);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 验签</span><br><span class="line">     * @param data                  原始数据字节数组</span><br><span class="line">     * @param sign                  字节数组()</span><br><span class="line">     * @param pKHexString    hex130长度公钥</span><br><span class="line">     * @return                      true or false</span><br><span class="line">     * @throws Exception</span><br><span class="line">     */</span><br><span class="line">    public static boolean verify(byte[] data, byte[] sign, String pKHexString) throws Exception &#123;</span><br><span class="line">        SM2Signer signer = new SM2Signer();</span><br><span class="line">        X9ECParameters sm2ECParameters = GMNamedCurves.getByName(&quot;sm2p256v1&quot;);</span><br><span class="line">        //构造domain参数</span><br><span class="line">        ECDomainParameters domainParameters = new ECDomainParameters(sm2ECParameters.getCurve(), sm2ECParameters.getG(), sm2ECParameters.getN());</span><br><span class="line">        if (pKHexString.length() == 128) &#123;</span><br><span class="line">            pKHexString = &quot;04&quot; + pKHexString;</span><br><span class="line">        &#125;</span><br><span class="line">        ECPoint ecPoint = sm2ECParameters.getCurve().decodePoint(Hex.decode(pKHexString));</span><br><span class="line">        CipherParameters param = new ECPublicKeyParameters(ecPoint, domainParameters);</span><br><span class="line">        signer.init(false, param);</span><br><span class="line">        signer.update(data, 0, data.length);</span><br><span class="line">        return signer.verifySignature(sign);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 私钥生成公钥</span><br><span class="line">     * @param priKeyHexString 私钥Hex格式，必须64位</span><br><span class="line">     * @return 公钥Hex格式，04开头，130位</span><br><span class="line">     * @throws Exception 例如：</span><br><span class="line">     */</span><br><span class="line">    public static String getPubKeyByPriKey(String priKeyHexString) throws Exception &#123;</span><br><span class="line">        if (priKeyHexString == null || priKeyHexString.length() != 64) &#123;</span><br><span class="line">            System.err.println(&quot;priKey 必须是Hex 64位格式，例如：11d0a44d47449d48d614f753ded6b06af76033b9c3a2af2b8b2239374ccbce3a&quot;);</span><br><span class="line">            return &quot;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        String pubKeyHexString = null;</span><br><span class="line">        X9ECParameters sm2ECParameters = GMNamedCurves.getByName(&quot;sm2p256v1&quot;);</span><br><span class="line">        //构造domain参数</span><br><span class="line">        BigInteger privateKeyD = new BigInteger(priKeyHexString, 16);</span><br><span class="line"></span><br><span class="line">        ECParameterSpec ecParameterSpec = new ECParameterSpec(sm2ECParameters.getCurve(), sm2ECParameters.getG(), sm2ECParameters.getN());</span><br><span class="line">        ECPrivateKeySpec ecPrivateKeySpec = new ECPrivateKeySpec(privateKeyD, ecParameterSpec);</span><br><span class="line">        PrivateKey privateKey = null;</span><br><span class="line">        privateKey = KeyFactory.getInstance(&quot;EC&quot;, new BouncyCastleProvider()).generatePrivate(ecPrivateKeySpec);</span><br><span class="line"></span><br><span class="line">        // 临时解决办法</span><br><span class="line">        String pointString = privateKey.toString();</span><br><span class="line">//        System.out.println(pointString);</span><br><span class="line">        String pointString_X = pointString.substring(pointString.indexOf(&quot;X: &quot;) + &quot;X: &quot;.length(), pointString.indexOf(&quot;Y: &quot;)).trim();</span><br><span class="line">        String pointString_Y = pointString.substring(pointString.indexOf(&quot;Y: &quot;) + &quot;Y: &quot;.length()).trim();</span><br><span class="line">//        System.out.println(pointString_X);</span><br><span class="line">//        System.out.println(pointString_Y);</span><br><span class="line"></span><br><span class="line">        pubKeyHexString = &quot;04&quot; + pointString_X + pointString_Y;</span><br><span class="line">        return pubKeyHexString;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">       geneSM2HexKeyPair();</span><br><span class="line"></span><br><span class="line">        // String hexpriKey = &quot;ec0ebed3a633dd0c72d139b319205c412e6800cd2e68a537e9b275c6557671f1&quot;;</span><br><span class="line">        // String hexpubKey = &quot;04bc8503945bd80ac2fb9a1abf1bd3e0489bc0d37b9b102ba3244f2b5233b7458039060c05efc9467beb72c27b617a5c4c1463269bfea5af3a85dd242dbeb67955&quot;;</span><br><span class="line"></span><br><span class="line">        // String data = &quot;59817a86a44ab6ae820928b91799cf3f356be32047e6265309d6f1082ffe529e2b45a1ff1503791201104983d8fa92038dc28ce9fb42ff3f3fa8b6fe2dafd361fc4bc3b5c2068b88ab491fbd6e886afdd5dc80cc316852d31f6b6735f20674e65c7ea2dc7285dc13ad842e3517487eb94b0c30ce68e919436b9c74ce62d833e88a4bc0b37037c2f1ad3c5909071af933a74e43597fd89d0bb2dc14e73f577c3573abe0cd9b4a8f27f92a15dd9781a41fa83056ddc19549119ed10ab0b3f78770&quot;;</span><br><span class="line">        // String decryptData = decrypt(data, hexpriKey);</span><br><span class="line">        // System.out.println(&quot;明文：&quot; + decryptData);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>SM3</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 基于hutool工具</span><br><span class="line">SmUtil.sm3</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;cn.hutool&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;hutool-crypto&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;bcpkix-jdk18on&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.78.1&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>SM4</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.withdrawal.utils.smUtil.sm4;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import org.bouncycastle.jce.provider.BouncyCastleProvider;</span><br><span class="line">import org.bouncycastle.util.encoders.Hex;</span><br><span class="line"></span><br><span class="line">import javax.crypto.Cipher;</span><br><span class="line">import javax.crypto.spec.IvParameterSpec;</span><br><span class="line">import javax.crypto.spec.SecretKeySpec;</span><br><span class="line">import java.security.Security;</span><br><span class="line"></span><br><span class="line">public class sm4CbcUtilWithIv &#123;</span><br><span class="line"></span><br><span class="line">    static &#123;</span><br><span class="line">        Security.addProvider(new BouncyCastleProvider());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static byte[] encryptCbcPadding(byte[] key, byte[] iv, byte[] data) throws Exception &#123;</span><br><span class="line">        Cipher cipher = Cipher.getInstance(&quot;SM4/CBC/PKCS5Padding&quot;, &quot;BC&quot;);</span><br><span class="line">        SecretKeySpec keySpec = new SecretKeySpec(key, &quot;SM4&quot;);</span><br><span class="line">        IvParameterSpec ivSpec = new IvParameterSpec(iv);</span><br><span class="line">        cipher.init(Cipher.ENCRYPT_MODE, keySpec, ivSpec);</span><br><span class="line">        return cipher.doFinal(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static byte[] decryptCbcPadding(byte[] key, byte[] iv, byte[] encryptedData) throws Exception &#123;</span><br><span class="line">        Cipher cipher = Cipher.getInstance(&quot;SM4/CBC/PKCS5Padding&quot;, &quot;BC&quot;);</span><br><span class="line">        SecretKeySpec keySpec = new SecretKeySpec(key, &quot;SM4&quot;);</span><br><span class="line">        IvParameterSpec ivSpec = new IvParameterSpec(iv);</span><br><span class="line">        cipher.init(Cipher.DECRYPT_MODE, keySpec, ivSpec);</span><br><span class="line">        return cipher.doFinal(encryptedData);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        // SM4密钥</span><br><span class="line">        // 16位字符密钥</span><br><span class="line">        String keyString = &quot;OFY2GP60WK9EHIVX&quot;;</span><br><span class="line">        // 将16位字符转换为字节数组</span><br><span class="line">        byte[] key = keyString.getBytes(&quot;UTF-8&quot;);</span><br><span class="line">        // byte[] key = Hex.decode(&quot;0123456789ABCDEFFEDCBA9876543210&quot;);</span><br><span class="line">        // 初始化向量</span><br><span class="line">        // byte[] iv = Hex.decode(&quot;00000000000000000000000000000000&quot;);</span><br><span class="line">        // 16位字符密钥</span><br><span class="line">        String ivString = &quot;HTPJXVE5MSFQYAOL&quot;;</span><br><span class="line">        // 将16位字符转换为字节数组</span><br><span class="line">        byte[] iv = ivString.getBytes(&quot;UTF-8&quot;);</span><br><span class="line">        // 需要加密的数据</span><br><span class="line">        String plainText = &quot;161213&quot;;</span><br><span class="line">        byte[] data = plainText.getBytes(&quot;UTF-8&quot;);</span><br><span class="line"></span><br><span class="line">        // 加密</span><br><span class="line">        byte[] encryptedData = encryptCbcPadding(key, iv, data);</span><br><span class="line">        // 输出加密后的数据</span><br><span class="line">        System.out.println(&quot;Encrypted data: &quot; + Hex.toHexString(encryptedData));</span><br><span class="line"></span><br><span class="line">        // 解密</span><br><span class="line">        String desStr = new String (decryptCbcPadding(key, iv, encryptedData), &quot;UTF-8&quot;);</span><br><span class="line">        System.out.println(&quot;Decrypted data: &quot; + desStr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>工具类 SignUtil</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.withdrawal.utils.smUtil;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import cn.hutool.crypto.SmUtil;</span><br><span class="line">import com.withdrawal.utils.smUtil.sm2.SM2Utils;</span><br><span class="line">import org.bouncycastle.util.encoders.Hex;</span><br><span class="line"></span><br><span class="line">import java.nio.charset.StandardCharsets;</span><br><span class="line">import java.security.KeyPair;</span><br><span class="line">import java.security.PrivateKey;</span><br><span class="line">import java.security.PublicKey;</span><br><span class="line">import java.util.Base64;</span><br><span class="line">import java.util.UUID;</span><br><span class="line"></span><br><span class="line">import static com.withdrawal.utils.smUtil.sm2.SM2Utils.*;</span><br><span class="line">import static com.withdrawal.utils.smUtil.sm4.sm4CbcUtilWithIv.decryptCbcPadding;</span><br><span class="line">import static com.withdrawal.utils.smUtil.sm4.sm4CbcUtilWithIv.encryptCbcPadding;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @desc 基于sm国密工具类实现数字信封</span><br><span class="line"> * @author  </span><br><span class="line"> * @date 2024/10/22</span><br><span class="line"> * */</span><br><span class="line">public class SmSignUtil &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @desc 生成服务端的sm2密钥对</span><br><span class="line">     * */</span><br><span class="line">    public static void initServer() throws Exception&#123;</span><br><span class="line">        KeyPair keyPair = geneSM2KeyPair();</span><br><span class="line">        PrivateKey privateKey = keyPair.getPrivate();</span><br><span class="line">        PublicKey publicKey = keyPair.getPublic();</span><br><span class="line">        System.out.println(&quot;========  hex keyPair       ========&quot;);</span><br><span class="line">        System.out.println(&quot;server hex priKey: &quot; + getPriKeyHexString(privateKey));</span><br><span class="line">        System.out.println(&quot;server hex pubKey: &quot; + getPubKeyHexString(publicKey));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @desc 生成客户端的sm2密钥对</span><br><span class="line">     * */</span><br><span class="line">    public static void initClient() throws Exception&#123;</span><br><span class="line">        KeyPair keyPair = geneSM2KeyPair();</span><br><span class="line">        PrivateKey privateKey = keyPair.getPrivate();</span><br><span class="line">        PublicKey publicKey = keyPair.getPublic();</span><br><span class="line">        System.out.println(&quot;========  hex keyPair       ========&quot;);</span><br><span class="line">        System.out.println(&quot;client hex priKey: &quot; + getPriKeyHexString(privateKey));</span><br><span class="line">        System.out.println(&quot;client hex pubKey: &quot; + getPubKeyHexString(publicKey));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @desc 生成服务端的sm4-iv</span><br><span class="line">     * */</span><br><span class="line">    public static void initSm4Iv()&#123;</span><br><span class="line">        String sm4Iv =  UUID.randomUUID().toString().replaceAll(&quot;-&quot;,&quot;&quot;).substring(0,16).toUpperCase();</span><br><span class="line">        System.out.println(&quot;========  sm4-Iv       ========&quot;);</span><br><span class="line">        System.out.println(&quot;sm4Iv:&quot;+sm4Iv);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @desc 生成服务端的sm4-iv</span><br><span class="line">     * */</span><br><span class="line">    public static void initSm3Key()&#123;</span><br><span class="line">        String sm3Key =  UUID.randomUUID().toString().replaceAll(&quot;-&quot;,&quot;&quot;).substring(0,32).toUpperCase();</span><br><span class="line">        System.out.println(&quot;========  sm3-Key      ========&quot;);</span><br><span class="line">        System.out.println(&quot;sm3Key:&quot;+sm3Key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @desc 加密原始数据，获取sm4加密后字符串</span><br><span class="line">     * @author  </span><br><span class="line">     * @date 2024/10/22</span><br><span class="line">     * @param params 原始数据</span><br><span class="line">     * @param sm4Iv sm4的IV偏移向量</span><br><span class="line">     * @param sm4Key sm4的密钥</span><br><span class="line">     * @return ciphertext 加密密文</span><br><span class="line">     * */</span><br><span class="line">    public static String ciphertext(</span><br><span class="line">            String params,</span><br><span class="line">            String sm4Key,</span><br><span class="line">            String sm4Iv</span><br><span class="line">    ) throws Exception &#123;</span><br><span class="line"></span><br><span class="line">        // sm4配置</span><br><span class="line">        byte[] key = sm4Key.getBytes(StandardCharsets.UTF_8);</span><br><span class="line">        byte[] iv = sm4Iv.getBytes(StandardCharsets.UTF_8);</span><br><span class="line"></span><br><span class="line">        // 待加密数据</span><br><span class="line">        byte[] data = params.getBytes(StandardCharsets.UTF_8);</span><br><span class="line"></span><br><span class="line">        // 加密数据</span><br><span class="line">        return Hex.toHexString(encryptCbcPadding(key, iv, data));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @desc 通过sm3加密`ciphertext`得到摘要签名</span><br><span class="line">     * @remark sm4的密钥，在数字信封是动态变化，通过sm2解密后获取，每次传递的sm4的密钥随机。</span><br><span class="line">     * @author  </span><br><span class="line">     * @date 2024/10/22</span><br><span class="line">     * @param ciphertext 通过sm4加密后的数据</span><br><span class="line">     * @param sm3Key sm4的密钥</span><br><span class="line">     * */</span><br><span class="line">    public static String digest(</span><br><span class="line">            String ciphertext,</span><br><span class="line">            String sm3Key</span><br><span class="line">    )&#123;</span><br><span class="line">        // 生成基于sm3的摘要签名</span><br><span class="line">        return SmUtil.sm3( new String (ciphertext.getBytes(StandardCharsets.UTF_8),StandardCharsets.UTF_8) + sm3Key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @desc 通过sm2加密sm4密钥，生成加密密文</span><br><span class="line">     * @remark sm4的密钥，在数字信封是动态变化，通过sm2解密后获取，每次传递的sm4的密钥随机。</span><br><span class="line">     * @author  </span><br><span class="line">     * @date 2024/10/22</span><br><span class="line">     * @param pubKeyHexString sm2的公钥</span><br><span class="line">     * @param sm4Key sm4的密钥</span><br><span class="line">     * */</span><br><span class="line">    public static String encryption_SM4Key(</span><br><span class="line">            String sm4Key,</span><br><span class="line">            String pubKeyHexString</span><br><span class="line">    ) throws Exception &#123;</span><br><span class="line">        return  SM2Utils.encrypt(sm4Key, pubKeyHexString);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @desc 通过sm2加密sm4密钥，生成sign签名</span><br><span class="line">     * @remark sm4的密钥，在数字信封是动态变化，通过sm2解密后获取，每次传递的sm4的密钥随机。</span><br><span class="line">     * @author  </span><br><span class="line">     * @date 2024/10/22</span><br><span class="line">     * @param priKeyHexString sm2的公钥</span><br><span class="line">     * @param digest sm3摘要</span><br><span class="line">     * */</span><br><span class="line">    public static String sign(</span><br><span class="line">            String digest,</span><br><span class="line">            String priKeyHexString</span><br><span class="line">    ) throws Exception &#123;</span><br><span class="line">        return  SM2Utils.sign(digest, priKeyHexString);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @desc 验签</span><br><span class="line">     * @param data                  数据</span><br><span class="line">     * @param signValue             签名值(hex型)</span><br><span class="line">     * @param publicKeyHexString    hex130长度公钥</span><br><span class="line">     */</span><br><span class="line">    public static boolean verify(</span><br><span class="line">            String data,</span><br><span class="line">            String signValue,</span><br><span class="line">            String publicKeyHexString</span><br><span class="line">    ) throws Exception &#123;</span><br><span class="line">       return SM2Utils.verify(data,signValue,publicKeyHexString);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @desc 通过sm2解密sm4密钥，获取sm4密钥，用于解密数据</span><br><span class="line">     * @author  </span><br><span class="line">     * @date 2024/10/22</span><br><span class="line">     * @param cipherData 加密密文</span><br><span class="line">     * @param priKeyHexString sm2的私钥</span><br><span class="line">     * */</span><br><span class="line">    public static String decryption_SM4Key(</span><br><span class="line">            String cipherData,</span><br><span class="line">            String priKeyHexString</span><br><span class="line">    )&#123;</span><br><span class="line">        return SM2Utils.decrypt(</span><br><span class="line">                cipherData,</span><br><span class="line">                priKeyHexString</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @desc 通过sm4解密加密数据</span><br><span class="line">     * @remark sm4Key密钥是通过sm2解密获取的，动态变化的sm4key密钥。</span><br><span class="line">     * @author  </span><br><span class="line">     * @date 2024/10/22</span><br><span class="line">     * */</span><br><span class="line">    public static String getParams(</span><br><span class="line">            String ciphertext,</span><br><span class="line">            String sm4Key,</span><br><span class="line">            String sm4Iv</span><br><span class="line">    ) throws Exception &#123;</span><br><span class="line">        // sm4配置</span><br><span class="line">        byte[] key = sm4Key.getBytes(StandardCharsets.UTF_8);</span><br><span class="line">        byte[] iv = sm4Iv.getBytes(StandardCharsets.UTF_8);</span><br><span class="line"></span><br><span class="line">        // 待加密数据</span><br><span class="line">        byte[] data = Hex.decode(ciphertext);</span><br><span class="line"></span><br><span class="line">        // 已解密数据</span><br><span class="line">        return new String(decryptCbcPadding(key, iv, data),StandardCharsets.UTF_8);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line"></span><br><span class="line">        /*生成密钥文件*/</span><br><span class="line">        // initServer();</span><br><span class="line">        // initClient();</span><br><span class="line">        // initSm4Iv();</span><br><span class="line">        // initSm3Key();</span><br><span class="line"></span><br><span class="line">        // ----------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">        // 客户端向服务端请求</span><br><span class="line">        String  server_hex_priKey = &quot;e65601c82fecf1d8063f77be8024a4b1f8744164e0b3d17d7e1dbdc81a59ef60&quot;;</span><br><span class="line">        String  server_hex_pubKey = &quot;04eacb92a58039dd2d65385559d720cd8d20791f8f729ae6e5157d172b4c3becafe83e1a0ed28e05963f6ea4702dc047ceb9e1b0e48f6f0b39006692e8177488a5&quot;;</span><br><span class="line">        // 服务端向客户端响应</span><br><span class="line">        String  client_hex_priKey = &quot;cfb3c8655fbe7d01983ab3a91929006d8adc6c5104e87ba1c8391850fcf5c318&quot;;</span><br><span class="line">        String  client_hex_pubKey = &quot;0455f42c49e96594e03f0b5779560e953bb956962ab57e072f65bc02eebc44d385214d2b7c2f9a02466fa54d8d0a36d90c463e55a3e0b5669108c8aaaec562ff91&quot;;</span><br><span class="line">        String  sm4Iv = &quot;A8F602FDE7654BD0&quot;;</span><br><span class="line">        String sm3Key = &quot;EDCA0B82870C4F69A17FC83722899F14&quot;;</span><br><span class="line"></span><br><span class="line">        // 原始数据</span><br><span class="line">        String params = &quot;Hello World !&quot;;</span><br><span class="line">        System.out.println(&quot;params：&quot;+params);</span><br><span class="line"></span><br><span class="line">        // 随机</span><br><span class="line">        String sm4Key = UUID.randomUUID().toString().replaceAll(&quot;-&quot;,&quot;&quot;).substring(0,16).toUpperCase();</span><br><span class="line">        System.out.println(&quot;sm4Key：&quot;+sm4Key);</span><br><span class="line"></span><br><span class="line">        // 加密密文</span><br><span class="line">        String ciphertext = ciphertext(params,sm4Key,sm4Iv);</span><br><span class="line">        System.out.println(&quot;ciphertext：&quot;+ciphertext);</span><br><span class="line"></span><br><span class="line">        // 通过sm3对加密密文进行获取摘要签名</span><br><span class="line">        String digest = digest(ciphertext,sm3Key);</span><br><span class="line">        System.out.println(&quot;digest：&quot;+digest);</span><br><span class="line"></span><br><span class="line">        // 对通过sm3摘要密文（sm4密钥）digest进行sm2签名（客户端的私钥）</span><br><span class="line">        String sign = sign(digest,client_hex_priKey);</span><br><span class="line">        System.out.println(&quot;sign：&quot;+sign);</span><br><span class="line"></span><br><span class="line">        // 对sm4密钥进行sm2加密(服务端的公钥)</span><br><span class="line">        String encryption_SM4Key =  encryption_SM4Key(sm4Key,server_hex_pubKey);</span><br><span class="line">        System.out.println(&quot;encryption_SM4Key：&quot;+encryption_SM4Key);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;------------------------------------------------------------------------------&quot;);</span><br><span class="line"></span><br><span class="line">        // 验证签名（客户端的公钥）</span><br><span class="line">        boolean verify = verify(digest,sign,client_hex_pubKey);</span><br><span class="line">        System.out.println(&quot;verify：&quot;+verify);</span><br><span class="line"></span><br><span class="line">        // 解密sm4密钥（服务端的私钥）</span><br><span class="line">        String decryption_SM4Key = decryption_SM4Key(encryption_SM4Key,server_hex_priKey);</span><br><span class="line">        System.out.println(&quot;decryption_SM4Key：&quot;+decryption_SM4Key);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        // 解密原始数据</span><br><span class="line">        String getParams = getParams(</span><br><span class="line">                ciphertext,</span><br><span class="line">                decryption_SM4Key,</span><br><span class="line">                sm4Iv</span><br><span class="line">        );</span><br><span class="line">        System.out.println(&quot;getParams:&quot;+getParams);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>yml中的sm国密配置</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 接口加密配置</span><br><span class="line">encry:</span><br><span class="line">  ## 国密加密配置</span><br><span class="line">  ## sm2 非对称加密</span><br><span class="line">  sm2:</span><br><span class="line">    # 服务端</span><br><span class="line">    server:</span><br><span class="line">      # 用途：客户端，公钥加密</span><br><span class="line">      hex_publicKey: </span><br><span class="line">      # 用途：服务端，私钥解密</span><br><span class="line">      hex_privateKey: </span><br><span class="line">    # 客户端</span><br><span class="line">    client:</span><br><span class="line">      # 用途：服务器，签名验证</span><br><span class="line">      hex_publicKey: </span><br><span class="line">      # 用途：客户端，私钥签名</span><br><span class="line">      hex_privateKey: </span><br><span class="line">  ## sm3 生成摘要，类似于md5（32位）&gt; 用于拼接待生成摘要的字符串后，提高安全性。</span><br><span class="line">  sm3:</span><br><span class="line">    key: EDCA0B82870C4F69A17FC83722899F14</span><br><span class="line">  ## sm4 对称加密</span><br><span class="line">  sm4:</span><br><span class="line">    iv: A8F602FDE7654BD0</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/helloworders/article/details/140467817&quot;&gt;基于国密（SM2，SM3，SM4）的数字信封加密加签实现&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
  <entry>
    <title>win11无法开启热点</title>
    <link href="https://blog.wo0ow.com/mblog/44542.html"/>
    <id>https://blog.wo0ow.com/mblog/44542.html</id>
    <published>2024-10-19T03:05:53.000Z</published>
    <updated>2024-10-19T03:13:39.977Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/m0_49015967/article/details/127860694">win11电脑开移动热点，但是手机连不上</a></p><p>根据博客指引，成功解决win11下开启热点，手机无法连接问题。</p><blockquote><p>亲测：不需要开防火墙</p></blockquote><p><img src="/mblog/44542/Snipaste_2024-10-19_11-08-42.png"></p><p><img src="/mblog/44542/Snipaste_2024-10-19_11-12-03.png"></p><p>以上操作完成后，应该是可以正常连接热点并上网的。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/m0_49015967/article/details/127860694&quot;&gt;win11电脑开移动热点，但是手机连不上&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;根据博客指引，成功解决win11下开启热点，手机无法连接问题。&lt;/p&gt;</summary>
      
    
    
    
    <category term="技术博客" scheme="https://blog.wo0ow.com/categories/%E6%8A%80%E6%9C%AF%E5%8D%9A%E5%AE%A2/"/>
    
    
  </entry>
  
</feed>
